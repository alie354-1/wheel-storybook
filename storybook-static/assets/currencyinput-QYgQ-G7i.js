import{j as J}from"./jsx-runtime-DF2Pcvd1.js";import{r as O,R as we}from"./index-B2-qRKKC.js";var l=function(){return l=Object.assign||function(r){for(var a,t=1,o=arguments.length;t<o;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])}return r},l.apply(this,arguments)};function de(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a}function R(e,r,a){if(a||arguments.length===2)for(var t=0,o=r.length,n;t<o;t++)(n||!(t in r))&&(n||(n=Array.prototype.slice.call(r,0,t)),n[t]=r[t]);return e.concat(n||Array.prototype.slice.call(r))}var F=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},$e={k:1e3,m:1e6,b:1e9},Ge=function(e,r){r===void 0&&(r=".");var a=new RegExp("(\\d+(".concat(F(r),"\\d*)?)([kmb])$"),"i"),t=e.match(a);if(t){var o=t[1],n=t[3],u=$e[n.toLowerCase()];return Number(o.replace(r,"."))*u}},Me=function(e,r){r===void 0&&(r=",");var a=new RegExp(F(r),"g");return e.replace(a,"")},Te=function(e,r){var a=F(r.join("")),t=new RegExp("[^\\d".concat(a,"]"),"gi");return e.replace(t,"")},fe=function(e){var r=e.value,a=e.groupSeparator,t=a===void 0?",":a,o=e.decimalSeparator,n=o===void 0?".":o,u=e.allowDecimals,i=u===void 0?!0:u,c=e.decimalsLimit,V=c===void 0?2:c,S=e.allowNegativeValue,p=S===void 0?!0:S,m=e.disableAbbreviations,I=m===void 0?!1:m,C=e.prefix,f=C===void 0?"":C,j=e.transformRawValue,K=j===void 0?function(M){return M}:j,s=K(r);if(s==="-")return s;var b=I?[]:["k","m","b"],N=new RegExp("((^|\\D)-\\d)|(-".concat(F(f),")")),H=N.test(s),D=RegExp("(\\d+)-?".concat(F(f))).exec(r)||[],k=D[0],X=D[1],Y=f?k?s.replace(k,"").concat(X):s.replace(f,""):s,Z=Me(Y,t),P=Te(Z,R([t,n],b,!0)),B=P;if(!I){if(b.some(function(M){return M===P.toLowerCase().replace(n,"")}))return"";var _=Ge(P,n);_&&(B=String(_))}var L=H&&p?"-":"";if(n&&B.includes(n)){var U=P.split(n),ee=U[0],$=U[1],G=V&&$?$.slice(0,V):$,re=i?"".concat(n).concat(G):"";return"".concat(L).concat(ee).concat(re)}return"".concat(L).concat(B)},We=function(e,r,a){if(a!==void 0&&e.length>1){if(a===0)return e.replace(r,"");if(e.includes(r)){var t=e.split(r),o=t[0],n=t[1];if(n.length===a)return e;if(n.length>a)return"".concat(o).concat(r).concat(n.slice(0,a))}var u=e.length>a?new RegExp("(\\d+)(\\d{".concat(a,"})")):new RegExp("(\\d)(\\d+)"),i=e.match(u);if(i){var o=i[1],n=i[2];return"".concat(o).concat(r).concat(n)}}return e},Ce=function(e,r){var a=r.groupSeparator,t=a===void 0?",":a,o=r.decimalSeparator,n=o===void 0?".":o,u=new RegExp("\\d([^".concat(F(t)).concat(F(n),"0-9]+)")),i=e.match(u);return i?i[1]:void 0},Q=function(e){var r=e.value,a=e.decimalSeparator,t=e.intlConfig,o=e.decimalScale,n=e.prefix,u=n===void 0?"":n,i=e.suffix,c=i===void 0?"":i;if(r===""||r===void 0)return"";if(r==="-")return"-";var V=new RegExp("^\\d?-".concat(u?"".concat(F(u),"?"):"","\\d")).test(r),S=a!=="."?He(r,a,V):r;a&&a!=="-"&&S.startsWith(a)&&(S="0"+S);var p=t||{},m=p.locale,I=p.currency,C=de(p,["locale","currency"]),f=l(l({},C),{minimumFractionDigits:o||0,maximumFractionDigits:20}),j=t?new Intl.NumberFormat(m,l(l({},f),I&&{style:"currency",currency:I})):new Intl.NumberFormat(void 0,f),K=j.formatToParts(Number(S)),s=qe(K,e),b=Ce(s,l({},e)),N=r.slice(-1)===a?a:"",H=S.match(RegExp("\\d+\\.(\\d+)"))||[],D=H[1];return o===void 0&&D&&a&&(s.includes(a)?s=s.replace(RegExp("(\\d+)(".concat(F(a),")(\\d+)"),"g"),"$1$2".concat(D)):b&&!c?s=s.replace(b,"".concat(a).concat(D).concat(b)):s="".concat(s).concat(a).concat(D)),c&&N?"".concat(s).concat(N).concat(c):b&&N?s.replace(b,"".concat(N).concat(b)):b&&c?s.replace(b,"".concat(N).concat(c)):[s,N,c].join("")},He=function(e,r,a){var t=e;return r&&r!=="."&&(t=t.replace(RegExp(F(r),"g"),"."),a&&r==="-"&&(t="-".concat(t.slice(1)))),t},qe=function(e,r){var a=r.prefix,t=r.groupSeparator,o=r.decimalSeparator,n=r.decimalScale,u=r.disableGroupSeparators,i=u===void 0?!1:u;return e.reduce(function(c,V,S){var p=V.type,m=V.value;return S===0&&a?p==="minusSign"?[m,a]:p==="currency"?R(R([],c,!0),[a],!1):[a,m]:p==="currency"?a?c:R(R([],c,!0),[m],!1):p==="group"?i?c:R(R([],c,!0),[t!==void 0?t:m],!1):p==="decimal"?n!==void 0&&n===0?c:R(R([],c,!0),[o!==void 0?o:m],!1):p==="fraction"?R(R([],c,!0),[n!==void 0?m.slice(0,n):m],!1):R(R([],c,!0),[m],!1)},[""]).join("")},ze={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},Je=function(e){var r=e||{},a=r.locale,t=r.currency,o=de(r,["locale","currency"]),n=a?new Intl.NumberFormat(a,l(l({},o),t&&{currency:t,style:"currency"})):new Intl.NumberFormat;return n.formatToParts(1000.1).reduce(function(u,i,c){return i.type==="currency"?c===0?l(l({},u),{currencySymbol:i.value,prefix:i.value}):l(l({},u),{currencySymbol:i.value,suffix:i.value}):i.type==="group"?l(l({},u),{groupSeparator:i.value}):i.type==="decimal"?l(l({},u),{decimalSeparator:i.value}):u},ze)},Ve=function(e){return RegExp(/\d/,"gi").test(e)},Qe=function(e,r,a){if(a===void 0||r===""||r===void 0||e===""||e===void 0)return e;if(!e.match(/\d/g))return"";var t=e.split(r),o=t[0],n=t[1];if(a===0)return o;var u=n||"";if(u.length<a)for(;u.length<a;)u+="0";else u=u.slice(0,a);return"".concat(o).concat(r).concat(u)},Xe=function(e){var r=e.selectionStart,a=e.value,t=e.lastKeyStroke,o=e.stateValue,n=e.groupSeparator,u=r,i=a;if(o&&u){var c=a.split("");return t==="Backspace"&&o[u]===n&&(c.splice(u-1,1),u-=1),t==="Delete"&&o[u]===n&&(c.splice(u,1),u+=1),i=c.join(""),{modifiedValue:i,cursorPosition:u}}return{modifiedValue:i,cursorPosition:r}},oe=O.forwardRef(function(e,r){var a=e.allowDecimals,t=a===void 0?!0:a,o=e.allowNegativeValue,n=o===void 0?!0:o,u=e.id,i=e.name,c=e.className,V=e.customInput,S=e.decimalsLimit,p=e.defaultValue,m=e.disabled,I=m===void 0?!1:m,C=e.maxLength,f=e.value,j=e.onValueChange,K=e.fixedDecimalLength,s=e.placeholder,b=e.decimalScale,N=e.prefix,H=e.suffix,D=e.intlConfig,k=e.step,X=e.min,Y=e.max,Z=e.disableGroupSeparators,P=Z===void 0?!1:Z,B=e.disableAbbreviations,_=B===void 0?!1:B,L=e.decimalSeparator,U=e.groupSeparator,ee=e.onChange,$=e.onFocus,G=e.onBlur,re=e.onKeyDown,M=e.onKeyUp,Ne=e.transformRawValue,pe=e.formatValueOnBlur,Re=pe===void 0?!0:pe,Ee=de(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(L&&Ve(L))throw new Error("decimalSeparator cannot be a number");if(U&&Ve(U))throw new Error("groupSeparator cannot be a number");var ae=O.useMemo(function(){return Je(D)},[D]),g=L||ae.decimalSeparator||"",T=U||ae.groupSeparator||"";if(g&&T&&g===T&&P===!1)throw new Error("decimalSeparator cannot be the same as groupSeparator");var q={decimalSeparator:g,groupSeparator:T,disableGroupSeparators:P,intlConfig:D,prefix:N||ae.prefix,suffix:H},ue={decimalSeparator:g,groupSeparator:T,allowDecimals:t,decimalsLimit:S||K||2,allowNegativeValue:n,disableAbbreviations:_,prefix:N||ae.prefix,transformRawValue:Ne},ge=O.useState(function(){return p!=null?Q(l(l({},q),{decimalScale:b,value:String(p)})):f!=null?Q(l(l({},q),{decimalScale:b,value:String(f)})):""}),h=ge[0],z=ge[1],ve=O.useState(!1),ie=ve[0],Oe=ve[1],me=O.useState(0),le=me[0],ce=me[1],be=O.useState(0),ye=be[0],je=be[1],Se=O.useState(null),De=Se[0],Fe=Se[1],A=O.useRef(null);O.useImperativeHandle(r,function(){return A.current});var he=function(d,x){Oe(!0);var y=Xe({selectionStart:x,value:d,lastKeyStroke:De,stateValue:h,groupSeparator:T}),E=y.modifiedValue,w=y.cursorPosition,v=fe(l({value:E},ue));if(!(C&&v.replace(/-/g,"").length>C)){if(v===""||v==="-"||v===g){j&&j(void 0,i,{float:null,formatted:"",value:""}),z(v),ce(1);return}var W=g?v.replace(g,"."):v,te=parseFloat(W),se=Q(l({value:v},q));if(w!=null){var ne=w+(se.length-d.length);ne=ne<=0?N?N.length:0:ne,ce(ne),je(ye+1)}if(z(se),j){var Ue={float:te,formatted:se,value:v};j(v,i,Ue)}}},Ie=function(d){var x=d.target,y=x.value,E=x.selectionStart;he(y,E),ee&&ee(d)},ke=function(d){return $&&$(d),h?h.length:0},Ae=function(d){var x=d.target.value,y=fe(l({value:x},ue));if(y==="-"||y===g||!y){z(""),G&&G(d);return}var E=We(y,g,K),w=Qe(E,g,b!==void 0?b:K),v=g?w.replace(g,"."):w,W=parseFloat(v),te=Q(l(l({},q),{value:w}));j&&Re&&j(w,i,{float:W,formatted:te,value:w}),z(te),G&&G(d)},Ke=function(d){var x=d.key;if(Fe(x),k&&(x==="ArrowUp"||x==="ArrowDown")){d.preventDefault(),ce(h.length);var y=f!=null?String(f):void 0,E=g&&y?y.replace(g,"."):y,w=parseFloat(E??fe(l({value:h},ue)))||0,v=x==="ArrowUp"?w+k:w-k;if(X!==void 0&&v<Number(X)||!n&&v<0||Y!==void 0&&v>Number(Y))return;var W=String(k).includes(".")?Number(String(k).split(".")[1].length):void 0;he(String(W?v.toFixed(W):v).replace(".",g))}re&&re(d)},Pe=function(d){var x=d.key,y=d.currentTarget.selectionStart;if(x!=="ArrowUp"&&x!=="ArrowDown"&&h!=="-"){var E=Ce(h,{groupSeparator:T,decimalSeparator:g});if(E&&y&&y>h.length-E.length&&A.current){var w=h.length-E.length;A.current.setSelectionRange(w,w)}}M&&M(d)};O.useEffect(function(){f==null&&p==null&&z("")},[p,f]),O.useEffect(function(){ie&&h!=="-"&&A.current&&document.activeElement===A.current&&A.current.setSelectionRange(le,le)},[h,le,A,ie,ye]);var Be=function(){return f!=null&&h!=="-"&&(!g||h!==g)?Q(l(l({},q),{decimalScale:ie?void 0:b,value:String(f)})):h},xe=l({type:"text",inputMode:"decimal",id:u,name:i,className:c,onChange:Ie,onBlur:Ae,onFocus:ke,onKeyDown:Ke,onKeyUp:Pe,placeholder:s,disabled:I,value:Be(),ref:A},Ee);if(V){var Le=V;return we.createElement(Le,l({},xe))}return we.createElement("input",l({},xe))});oe.displayName="CurrencyInput";const Ye=O.forwardRef(({context:e="neutral",validationState:r="none",helperText:a,errorMessage:t,warningMessage:o,successMessage:n,label:u,required:i=!1,className:c="",...V},S)=>{const I=["w-full px-3 py-2 text-base rounded-lg shadow-sm placeholder:text-slate-400","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",r!=="none"?(()=>{switch(r){case"error":return"border-red-500 focus:border-red-500 focus:ring-red-500";case"warning":return"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500";case"success":return"border-green-500 focus:border-green-500 focus:ring-green-500";default:return""}})():(()=>{switch(e){case"consultant":return"border-blue-400 focus:border-blue-600 focus:ring-blue-500 bg-blue-50";case"client":return"border-green-400 focus:border-green-600 focus:ring-green-500 bg-green-50";case"admin":return"border-gray-400 focus:border-gray-600 focus:ring-gray-500 bg-gray-50";case"expert":return"border-purple-400 focus:border-purple-600 focus:ring-purple-500 bg-purple-50";case"toolCreator":return"border-indigo-400 focus:border-indigo-600 focus:ring-indigo-500 bg-indigo-50";case"founder":return"border-orange-400 focus:border-orange-600 focus:ring-orange-500 bg-orange-50";default:return"border-slate-300 focus:border-slate-500 focus:ring-slate-500 bg-white"}})(),c].filter(Boolean).join(" "),C=t&&r==="error"?{type:"error",message:t}:o&&r==="warning"?{type:"warning",message:o}:n&&r==="success"?{type:"success",message:n}:a?{type:"helper",message:a}:null,f=V.id||`currency-input-${Math.random().toString(36).substr(2,9)}`;return J.jsxs("div",{children:[u&&J.jsxs("label",{htmlFor:f,className:"block text-sm font-medium text-slate-700 mb-1",children:[u,i&&J.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),J.jsx(oe,{id:f,className:I,ref:S,...V}),C&&J.jsx("p",{className:`mt-1 text-sm ${C.type==="error"?"text-red-600":C.type==="warning"?"text-yellow-600":C.type==="success"?"text-green-600":"text-slate-600"}`,children:C.message})]})});Ye.displayName="CurrencyInput";try{oe.displayName="CurrencyInput",oe.__docgenInfo={description:"",displayName:"CurrencyInput",props:{}}}catch{}export{Ye as C};
