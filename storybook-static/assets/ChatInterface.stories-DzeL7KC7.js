import{j as e}from"./jsx-runtime-DF2Pcvd1.js";import"./addressinput-CNH7vJB0.js";import"./alert-C4wmZbSF.js";import{A as O}from"./Avatar-FRCDbBKZ.js";import{B as Ae}from"./badge-CEAxzBqM.js";import"./billingstatus-Cfmsa9I5.js";import"./Breadcrumbs-DjVWW3u6.js";import{B as D}from"./button-Cqm7tkEM.js";import"./card-C_YySC7Y.js";import"./checkbox-ifqmoBLn.js";import"./clientbadge-FMKPWyE6.js";import"./collaboratoravatar-CiXANbWh.js";import"./colorpicker-DL67fCAe.js";import"./consenttoggle-BxfFTX-x.js";import"./currencyinput-QYgQ-G7i.js";import"./datepicker-DaYnNXmZ.js";import"./documenttype-DODrRpWN.js";import"./dropdown-menu-C6s4BPQY.js";import{E as F}from"./EmptyState-BxGYtNwh.js";import"./expertisetag-cuJKChjS.js";import{I as h}from"./icon-CjZl_xS7.js";import"./image-BkzfWbNq.js";import{I as Pe}from"./input-7rc8uvfk.js";import"./label-Bc71zScC.js";import"./loadingoverlay-epOQCsNk.js";import"./Logo-BCeQuN96.js";import"./modal-TYDdxiCO.js";import"./OnboardingWizard-W-ek0PPT.js";import"./Pagination-DtokpCiZ.js";import"./phoneinput-DnhyWeTn.js";import"./progress-DFy8PWGV.js";import"./progressindicator-CPvhbYMc.js";import"./projectphase-HexdRD8G.js";import"./richtexteditor-uaNC3sqX.js";import"./select-oq9sW1QX.js";import"./separator-fURmX4DE.js";import"./skeletonloader-vrkcUu0U.js";import"./slider-DUmiO_og.js";import{S as Re}from"./spinner-C4_lq1M4.js";import"./StatusDot-I44fDEUy.js";import"./switch-REYDQGjT.js";import"./tabs-CYGLg6Rb.js";import"./textarea-xf6_I_56.js";import"./timeindicator-B9W9zojc.js";import"./timepicker-DG-PATwk.js";import"./timerangeinput-D-eCRmyp.js";import"./toast-Byd1oQcU.js";import"./verticalslider-DXRhhGVf.js";import"./workspaceicon-B8JYiyw8.js";import"./container-BV66bbjT.js";import"./flex-B2tn7VQA.js";import"./grid-Dukaz8Hf.js";import"./panel-DJq8D5Bo.js";import"./stack-6K505iai.js";import{r as v}from"./index-B2-qRKKC.js";import"./supabase-_6SMTDjj.js";import{c as N}from"./utils-BWs1PtWc.js";import"./cn-Bi5Kq-9L.js";import"./clsx-B-dksMZM.js";import"./x-CTSIWqPJ.js";import"./createLucideIcon-mz0sz0u3.js";import"./chunk-QMGIS6GS-t_DnlxpT.js";import"./index-BACk8Kjg.js";import"./index-CFX93qP1.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-C0-VfTUy.js";import"./index-_AbP6Uzr.js";import"./index-J7qzKPKh.js";import"./index-CvtFoTXF.js";import"./check-DuvhxqeR.js";import"./index-DVrBHfCr.js";import"./Combination-DM4kBwHz.js";import"./index-ciuW_uyV.js";import"./index-D8c-22H5.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-BAk7S-tT.js";import"./chevron-right-Cglc0ypw.js";import"./circle-B6IJyZRp.js";import"./users-DsC9MV1W.js";import"./chevron-down-4p6LAh_V.js";import"./settings-oq6Li1sM.js";import"./folder-DFbRz8A7.js";import"./index-DUolvyrz.js";import"./immer-3uZG5tlX.js";import"./toConsumableArray-BIhBLUu1.js";import"./bootstrap-BZvWbWhX.js";const He=()=>({socket:{on:(s,n)=>{},off:s=>{},emit:(s,n)=>{}}}),Ie=s=>{const m=new Date().getTime()-s.getTime(),x=Math.floor(m/6e4),c=Math.floor(m/36e5),o=Math.floor(m/864e5);return x<1?"Just now":x<60?`${x}m ago`:c<24?`${c}h ago`:o<7?`${o}d ago`:s.toLocaleDateString()},Be=({chats:s,selectedChat:n,onChatSelect:m,context:x="consultant",currentUser:c})=>{const[o,f]=v.useState(""),r=v.useMemo(()=>o?s.filter(t=>{var d;return((d=t.name)==null?void 0:d.toLowerCase().includes(o.toLowerCase()))||t.participants.some(w=>w.name.toLowerCase().includes(o.toLowerCase()))}):s,[s,o]),a=t=>({consultant:"border-l-blue-500 bg-blue-50",client:"border-l-green-500 bg-green-50",admin:"border-l-purple-500 bg-purple-50",expert:"border-l-orange-500 bg-orange-50",tool_creator:"border-l-indigo-500 bg-indigo-50",founder:"border-l-red-500 bg-red-50",neutral:"border-l-gray-500 bg-gray-50"})[t]||"border-l-gray-500 bg-gray-50";return e.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(h,{name:"Search",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{name:"search",placeholder:"Search conversations...",value:o,onChange:t=>f(t.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:r.length===0?e.jsx(F,{title:o?"No conversations found":"No conversations yet",description:"Start a new conversation to get started"}):e.jsx("div",{className:"space-y-1 p-2",children:r.map(t=>{var d,w,i,u,C;return e.jsxs("div",{onClick:()=>m(t),className:N("flex items-center p-3 rounded-lg cursor-pointer transition-colors border-l-4",(n==null?void 0:n.id)===t.id?a(x):"border-l-transparent hover:bg-gray-50"),children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:t.type==="direct"?e.jsx(O,{src:((d=t.participants.find(j=>j.id!==c.id))==null?void 0:d.avatar)||((w=t.participants[0])==null?void 0:w.avatar),alt:((i=t.participants.find(j=>j.id!==c.id))==null?void 0:i.name)||((u=t.participants[0])==null?void 0:u.name),size:"md"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(h,{name:"Users",className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.name||t.participants.filter(j=>j.id!==c.id).map(j=>j.name).join(", ")}),t.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:Ie(t.lastMessage.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:((C=t.lastMessage)==null?void 0:C.content)||"No messages yet"}),t.unreadCount>0&&e.jsx(Ae,{variant:"primary",size:"sm",children:t.unreadCount})]})]})]},t.id)})})})]})},Oe=({chat:s,context:n="consultant",currentUser:m})=>{var c,o,f,r;const x=a=>({consultant:"text-blue-600",client:"text-green-600",admin:"text-purple-600",expert:"text-orange-600",tool_creator:"text-indigo-600",founder:"text-red-600",neutral:"text-gray-600"})[a]||"text-gray-600";return e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:s.type==="direct"?e.jsx(O,{src:((c=s.participants.find(a=>a.id!==m.id))==null?void 0:c.avatar)||((o=s.participants[0])==null?void 0:o.avatar),alt:((f=s.participants.find(a=>a.id!==m.id))==null?void 0:f.name)||((r=s.participants[0])==null?void 0:r.name),size:"md"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(h,{name:"Users",className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s.name||s.participants.filter(a=>a.id!==m.id).map(a=>a.name).join(", ")}),e.jsxs("p",{className:N("text-sm",x(n)),children:[s.participants.length," participant",s.participants.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{variant:"ghost",size:"sm",children:e.jsx(h,{name:"Phone",className:"w-4 h-4"})}),e.jsx(D,{variant:"ghost",size:"sm",children:e.jsx(h,{name:"Video",className:"w-4 h-4"})}),e.jsx(D,{variant:"ghost",size:"sm",children:e.jsx(h,{name:"Info",className:"w-4 h-4"})})]})]})},Fe=({messages:s,currentUser:n,context:m="consultant",onMessageReply:x,onMessageReact:c,loading:o})=>{const f=r=>({consultant:"bg-blue-500",client:"bg-green-500",admin:"bg-purple-500",expert:"bg-orange-500",tool_creator:"bg-indigo-500",founder:"bg-red-500",neutral:"bg-gray-500"})[r]||"bg-gray-500";return o?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(Re,{size:"lg"})}):s.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(F,{title:"No messages yet",description:"Start the conversation!"})}):e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.map(r=>{const a=r.sender.id===n.id;return e.jsx("div",{className:N("flex",a?"justify-end":"justify-start"),children:e.jsxs("div",{className:N("flex max-w-xs lg:max-w-md",a?"flex-row-reverse":"flex-row"),children:[!a&&e.jsx(O,{src:r.sender.avatar,alt:r.sender.name,size:"sm",className:"flex-shrink-0 mr-2"}),e.jsxs("div",{className:N("flex flex-col",a?"items-end":"items-start"),children:[!a&&e.jsx("span",{className:"text-xs text-gray-500 mb-1",children:r.sender.name}),e.jsxs("div",{className:N("px-4 py-2 rounded-lg",a?N("text-white",f(m)):"bg-gray-100 text-gray-900"),children:[e.jsx("p",{className:"text-sm",children:r.content}),r.attachments&&r.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:r.attachments.map(t=>e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsx(h,{name:"Paperclip",className:"w-3 h-3"}),e.jsx("span",{children:t.name})]},t.id))})]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:Ie(r.timestamp)}),r.status==="read"&&a&&e.jsx(h,{name:"CheckCheck",className:"w-3 h-3 text-blue-500"}),r.reactions&&r.reactions.length>0&&e.jsx("div",{className:"flex space-x-1",children:r.reactions.map((t,d)=>e.jsxs("span",{className:"text-xs bg-gray-200 px-1 rounded",children:[t.emoji," ",t.users.length]},d))})]})]})]})},r.id)})})},Je=({onSend:s,onTyping:n,context:m="consultant",placeholder:x="Type a message...",disabled:c})=>{const[o,f]=v.useState(""),[r,a]=v.useState([]),t=()=>{(o.trim()||r.length>0)&&(s(o.trim(),r),f(""),a([]))},d=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),t())},w=i=>({consultant:"text-blue-600 hover:text-blue-700",client:"text-green-600 hover:text-green-700",admin:"text-purple-600 hover:text-purple-700",expert:"text-orange-600 hover:text-orange-700",tool_creator:"text-indigo-600 hover:text-indigo-700",founder:"text-red-600 hover:text-red-700",neutral:"text-gray-600 hover:text-gray-700"})[i]||"text-gray-600 hover:text-gray-700";return e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:o,onChange:i=>{f(i.target.value),n==null||n()},onKeyPress:d,placeholder:x,disabled:c,className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),r.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:r.map((i,u)=>e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx(h,{name:"Paperclip",className:"w-3 h-3"}),e.jsx("span",{children:i.name}),e.jsx("button",{onClick:()=>a(C=>C.filter((j,H)=>H!==u)),className:"text-gray-500 hover:text-red-500",children:e.jsx(h,{name:"X",className:"w-3 h-3"})})]},u))})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"file",multiple:!0,onChange:i=>{i.target.files&&a(u=>[...u,...Array.from(i.target.files)])},className:"hidden",id:"file-upload"}),e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{var i;return(i=document.getElementById("file-upload"))==null?void 0:i.click()},disabled:c,children:e.jsx(h,{name:"Paperclip",className:"w-4 h-4"})}),e.jsx(D,{onClick:t,disabled:c||!o.trim()&&r.length===0,className:N("px-4 py-2",w(m)),children:e.jsx(h,{name:"Send",className:"w-4 h-4"})})]})]})})},Ke=({workspace:s,currentUser:n,chatId:m,context:x="consultant",onMessageSend:c,onChatSelect:o,showSidebar:f=!0,showSearch:r=!0,permissions:a=[],className:t})=>{const[d,w]=v.useState(null),[i,u]=v.useState([]),[C,j]=v.useState([]),[H,J]=v.useState(!1),{socket:b}=He();v.useEffect(()=>{const l=[{id:"1",type:"direct",participants:[n,{id:"2",name:"John Doe",email:"john@example.com",avatar:"/avatars/john.jpg"}],unreadCount:2,workspace:s.id,createdAt:new Date,lastMessage:{id:"1",content:"Hey, how are you?",sender:{id:"2",name:"John Doe",email:"john@example.com"},timestamp:new Date,chatId:"1",status:"read"}}];if(j(l),m){const g=l.find(y=>y.id===m);g&&w(g)}},[s.id,n,m]),v.useEffect(()=>(b.on("message:new",ze),b.on("message:update",Ee),b.on("typing:start",Le),b.on("typing:stop",We),()=>{b.off("message:new"),b.off("message:update"),b.off("typing:start"),b.off("typing:stop")}),[b]);const ze=l=>{u(g=>[...g,l])},Ee=l=>{u(g=>g.map(y=>y.id===l.id?l:y))},Le=l=>{},We=l=>{},_e=l=>{w(l),o==null||o(l),J(!0),setTimeout(()=>{const g=[{id:"1",content:"Hey, how are you?",sender:l.participants.find(y=>y.id!==n.id)||l.participants[0],timestamp:new Date(Date.now()-36e5),chatId:l.id,status:"read"},{id:"2",content:"I'm doing well, thanks! How about you?",sender:n,timestamp:new Date(Date.now()-3e6),chatId:l.id,status:"read"}];u(g),J(!1)},500)},Te=(l,g)=>{if(!d)return;const y={id:Date.now().toString(),content:l,sender:n,timestamp:new Date,chatId:d.id,status:"sending",attachments:g==null?void 0:g.map(S=>({id:Date.now().toString(),name:S.name,type:S.type,size:S.size,url:URL.createObjectURL(S)}))};u(S=>[...S,y]),c==null||c(y),setTimeout(()=>{u(S=>S.map(B=>B.id===y.id?{...B,status:"sent"}:B))},1e3)};return e.jsxs("div",{className:N("flex h-full bg-white rounded-lg shadow-lg overflow-hidden",t),children:[f&&e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsx(Be,{chats:C,selectedChat:d,onChatSelect:_e,context:x,currentUser:n})}),e.jsx("div",{className:"flex-1 flex flex-col",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{chat:d,context:x,currentUser:n}),e.jsx(Fe,{messages:i,currentUser:n,context:x,loading:H}),e.jsx(Je,{onSend:Te,context:x,placeholder:"Type a message...",disabled:!1})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(F,{title:"Select a conversation",description:"Choose a conversation from the sidebar to start chatting"})})})]})},Cs={title:"Layouts/Communication/ChatInterface",component:Ke,parameters:{layout:"fullscreen",docs:{description:{component:"A comprehensive chat interface component with real-time messaging, file attachments, and workspace context support."}}},argTypes:{context:{control:"select",options:["consultant","client","admin","expert","tool_creator","founder","neutral"],description:"Workspace context that affects styling and behavior"},showSidebar:{control:"boolean",description:"Whether to show the chat list sidebar"},showSearch:{control:"boolean",description:"Whether to show search functionality"}}},$e={id:"1",name:"Current User",email:"current@example.com",avatar:"/avatars/current.jpg",status:"online"},Qe={id:"workspace-1",name:"Design Team",type:"consultant",settings:{allowMessaging:!0,allowComments:!0,allowNotifications:!0,encryption:!0,retention:30}},p={args:{workspace:Qe,currentUser:$e,context:"consultant",showSidebar:!0,showSearch:!0,permissions:["chat:send","chat:read","chat:delete"]}},k={args:{...p.args,context:"client"}},M={args:{...p.args,context:"admin"}},I={args:{...p.args,context:"expert"}},z={args:{...p.args,context:"tool_creator"}},E={args:{...p.args,context:"founder"}},L={args:{...p.args,context:"neutral"}},W={args:{...p.args,showSidebar:!1}},_={args:{...p.args,showSearch:!1}},T={args:{...p.args,showSidebar:!1,showSearch:!1}},A={args:{...p.args,chatId:"1"}},P={args:{...p.args,permissions:["chat:read"]}},R={args:{...p.args,onMessageSend:s=>{console.log("Message sent:",s)},onChatSelect:s=>{console.log("Chat selected:",s)}}};var K,$,Q;p.parameters={...p.parameters,docs:{...(K=p.parameters)==null?void 0:K.docs,source:{originalSource:`{
  args: {
    workspace: mockWorkspace,
    currentUser: mockCurrentUser,
    context: 'consultant',
    showSidebar: true,
    showSearch: true,
    permissions: ['chat:send', 'chat:read', 'chat:delete']
  }
}`,...(Q=($=p.parameters)==null?void 0:$.docs)==null?void 0:Q.source}}};var V,X,q;k.parameters={...k.parameters,docs:{...(V=k.parameters)==null?void 0:V.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    context: 'client'
  }
}`,...(q=(X=k.parameters)==null?void 0:X.docs)==null?void 0:q.source}}};var G,Y,Z;M.parameters={...M.parameters,docs:{...(G=M.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    context: 'admin'
  }
}`,...(Z=(Y=M.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var U,ee,te;I.parameters={...I.parameters,docs:{...(U=I.parameters)==null?void 0:U.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    context: 'expert'
  }
}`,...(te=(ee=I.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var se,re,ae;z.parameters={...z.parameters,docs:{...(se=z.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    context: 'tool_creator'
  }
}`,...(ae=(re=z.parameters)==null?void 0:re.docs)==null?void 0:ae.source}}};var ne,oe,ie;E.parameters={...E.parameters,docs:{...(ne=E.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    context: 'founder'
  }
}`,...(ie=(oe=E.parameters)==null?void 0:oe.docs)==null?void 0:ie.source}}};var ce,le,me;L.parameters={...L.parameters,docs:{...(ce=L.parameters)==null?void 0:ce.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    context: 'neutral'
  }
}`,...(me=(le=L.parameters)==null?void 0:le.docs)==null?void 0:me.source}}};var de,pe,xe;W.parameters={...W.parameters,docs:{...(de=W.parameters)==null?void 0:de.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    showSidebar: false
  }
}`,...(xe=(pe=W.parameters)==null?void 0:pe.docs)==null?void 0:xe.source}}};var ue,ge,he;_.parameters={..._.parameters,docs:{...(ue=_.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    showSearch: false
  }
}`,...(he=(ge=_.parameters)==null?void 0:ge.docs)==null?void 0:he.source}}};var fe,je,ye;T.parameters={...T.parameters,docs:{...(fe=T.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    showSidebar: false,
    showSearch: false
  }
}`,...(ye=(je=T.parameters)==null?void 0:je.docs)==null?void 0:ye.source}}};var ve,we,be;A.parameters={...A.parameters,docs:{...(ve=A.parameters)==null?void 0:ve.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    chatId: '1'
  }
}`,...(be=(we=A.parameters)==null?void 0:we.docs)==null?void 0:be.source}}};var Ne,Se,Ce;P.parameters={...P.parameters,docs:{...(Ne=P.parameters)==null?void 0:Ne.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    permissions: ['chat:read'] // Only read permission, no send
  }
}`,...(Ce=(Se=P.parameters)==null?void 0:Se.docs)==null?void 0:Ce.source}}};var De,ke,Me;R.parameters={...R.parameters,docs:{...(De=R.parameters)==null?void 0:De.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    onMessageSend: message => {
      console.log('Message sent:', message);
    },
    onChatSelect: chat => {
      console.log('Chat selected:', chat);
    }
  }
}`,...(Me=(ke=R.parameters)==null?void 0:ke.docs)==null?void 0:Me.source}}};const Ds=["Default","ClientContext","AdminContext","ExpertContext","ToolCreatorContext","FounderContext","NeutralContext","WithoutSidebar","WithoutSearch","MinimalInterface","WithSpecificChat","RestrictedPermissions","InteractiveDemo"];export{M as AdminContext,k as ClientContext,p as Default,I as ExpertContext,E as FounderContext,R as InteractiveDemo,T as MinimalInterface,L as NeutralContext,P as RestrictedPermissions,z as ToolCreatorContext,A as WithSpecificChat,_ as WithoutSearch,W as WithoutSidebar,Ds as __namedExportsOrder,Cs as default};
