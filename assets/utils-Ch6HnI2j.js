function f(e,t,r={},n){if(!e.validation)return null;for(const a of e.validation){if(a.workspaceContext&&n&&a.workspaceContext!==n)continue;const s=d(a,t,e,r);if(s)return s}return null}function d(e,t,r,n){switch(e.type){case"required":if(t==null||t==="")return e.message||`${r.label} is required`;break;case"minLength":if(typeof t=="string"&&t.length<e.value)return e.message||`${r.label} must be at least ${e.value} characters`;break;case"maxLength":if(typeof t=="string"&&t.length>e.value)return e.message||`${r.label} must be no more than ${e.value} characters`;break;case"pattern":if(typeof t=="string"&&!new RegExp(e.value).test(t))return e.message||`${r.label} format is invalid`;break;case"email":if(typeof t=="string"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return e.message||`${r.label} must be a valid email address`;break;case"url":try{new URL(t)}catch{return e.message||`${r.label} must be a valid URL`}break;case"number":if(isNaN(Number(t)))return e.message||`${r.label} must be a valid number`;break;case"custom":if(typeof e.value=="function"){const s=e.value(t,n,r);if(s!==!0)return typeof s=="string"?s:e.message}break}return null}function p(e,t,r){const n={};for(const a of e){const s=f(a,t[a.name],t,r);s&&(n[a.name]=s)}return n}function l(e,t){let r=!0,n=e.required||!1,a=!1,s=!1;if(!e.conditional)return{visible:r,required:n,disabled:a,readonly:s};for(const i of e.conditional){const c=t[i.field];if(m(i,c))switch(i.action){case"show":r=!0;break;case"hide":r=!1;break;case"required":n=!0;break;case"disabled":a=!0;break;case"readonly":s=!0;break}}return{visible:r,required:n,disabled:a,readonly:s}}function m(e,t){switch(e.operator){case"equals":return t===e.value;case"not_equals":return t!==e.value;case"contains":return typeof t=="string"&&t.includes(e.value);case"greater_than":return Number(t)>Number(e.value);case"less_than":return Number(t)<Number(e.value);case"in":return Array.isArray(e.value)&&e.value.includes(t);case"not_in":return Array.isArray(e.value)&&!e.value.includes(t);default:return!1}}function b(e,t=[],r){return e.filter(n=>!(n.workspaceContext&&r&&n.workspaceContext!==r||n.permission&&!t.includes(n.permission)))}function g(e,t,r=[],n){return b(e,r,n).filter(s=>{const{visible:i}=l(s,t);return i})}function h(e,t,r=[],n){const s=g(e,t,r,n).filter(c=>{const{required:o}=l(c,t);return o});if(s.length===0)return 100;const i=s.filter(c=>{const o=t[c.name];return o!=null&&o!==""});return Math.round(i.length/s.length*100)}function y(e,t){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e(...n),t)}}function u(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array)return e.map(t=>u(t));if(typeof e=="object"){const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=u(e[r]));return t}return e}function k(e,t){return(t?`${t}-${e}`:e).replace(/[^a-zA-Z0-9-_]/g,"-").toLowerCase()}function v(e,t){return JSON.stringify(e)!==JSON.stringify(t)}export{u as a,k as b,h as c,y as d,g,v as h,p as v};
