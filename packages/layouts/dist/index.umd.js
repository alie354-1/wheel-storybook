(function(ie,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react"),require("@wheel/shared"),require("@wheel/ui")):typeof define=="function"&&define.amd?define(["exports","react","@wheel/shared","@wheel/ui"],c):(ie=typeof globalThis<"u"?globalThis:ie||self,c(ie["@wheel/layouts"]={},ie.React,ie.WheelShared,ie.WheelUI))})(this,function(ie,c,R,F){"use strict";var lt={exports:{}},Ue={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ft;function us(){if(Ft)return Ue;Ft=1;var t=c,s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(u,i,h){var f,x={},v=null,A=null;h!==void 0&&(v=""+h),i.key!==void 0&&(v=""+i.key),i.ref!==void 0&&(A=i.ref);for(f in i)n.call(i,f)&&!a.hasOwnProperty(f)&&(x[f]=i[f]);if(u&&u.defaultProps)for(f in i=u.defaultProps,i)x[f]===void 0&&(x[f]=i[f]);return{$$typeof:s,type:u,key:v,ref:A,props:x,_owner:l.current}}return Ue.Fragment=r,Ue.jsx=o,Ue.jsxs=o,Ue}var Je={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function ms(){return At||(At=1,process.env.NODE_ENV!=="production"&&function(){var t=c,s=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),T=Symbol.iterator,E="@@iterator";function N(d){if(d===null||typeof d!="object")return null;var P=T&&d[T]||d[E];return typeof P=="function"?P:null}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(d){{for(var P=arguments.length,K=new Array(P>1?P-1:0),ee=1;ee<P;ee++)K[ee-1]=arguments[ee];S("error",d,K)}}function S(d,P,K){{var ee=B.ReactDebugCurrentFrame,oe=ee.getStackAddendum();oe!==""&&(P+="%s",K=K.concat([oe]));var ce=K.map(function(le){return String(le)});ce.unshift("Warning: "+P),Function.prototype.apply.call(console[d],console,ce)}}var b=!1,m=!1,w=!1,M=!1,C=!1,g;g=Symbol.for("react.module.reference");function I(d){return!!(typeof d=="string"||typeof d=="function"||d===n||d===a||C||d===l||d===h||d===f||M||d===A||b||m||w||typeof d=="object"&&d!==null&&(d.$$typeof===v||d.$$typeof===x||d.$$typeof===o||d.$$typeof===u||d.$$typeof===i||d.$$typeof===g||d.getModuleId!==void 0))}function V(d,P,K){var ee=d.displayName;if(ee)return ee;var oe=P.displayName||P.name||"";return oe!==""?K+"("+oe+")":K}function q(d){return d.displayName||"Context"}function k(d){if(d==null)return null;if(typeof d.tag=="number"&&$("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case l:return"StrictMode";case h:return"Suspense";case f:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case u:var P=d;return q(P)+".Consumer";case o:var K=d;return q(K._context)+".Provider";case i:return V(d,d.render,"ForwardRef");case x:var ee=d.displayName||null;return ee!==null?ee:k(d.type)||"Memo";case v:{var oe=d,ce=oe._payload,le=oe._init;try{return k(le(ce))}catch{return null}}}return null}var L=Object.assign,y=0,j,D,p,_,U,z,J;function Q(){}Q.__reactDisabledLog=!0;function ne(){{if(y===0){j=console.log,D=console.info,p=console.warn,_=console.error,U=console.group,z=console.groupCollapsed,J=console.groupEnd;var d={configurable:!0,enumerable:!0,value:Q,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}y++}}function me(){{if(y--,y===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:L({},d,{value:j}),info:L({},d,{value:D}),warn:L({},d,{value:p}),error:L({},d,{value:_}),group:L({},d,{value:U}),groupCollapsed:L({},d,{value:z}),groupEnd:L({},d,{value:J})})}y<0&&$("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ce=B.ReactCurrentDispatcher,te;function xe(d,P,K){{if(te===void 0)try{throw Error()}catch(oe){var ee=oe.stack.trim().match(/\n( *(at )?)/);te=ee&&ee[1]||""}return`
`+te+d}}var fe=!1,ve;{var X=typeof WeakMap=="function"?WeakMap:Map;ve=new X}function H(d,P){if(!d||fe)return"";{var K=ve.get(d);if(K!==void 0)return K}var ee;fe=!0;var oe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ce;ce=Ce.current,Ce.current=null,ne();try{if(P){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Se){ee=Se}Reflect.construct(d,[],le)}else{try{le.call()}catch(Se){ee=Se}d.call(le.prototype)}}else{try{throw Error()}catch(Se){ee=Se}d()}}catch(Se){if(Se&&ee&&typeof Se.stack=="string"){for(var ae=Se.stack.split(`
`),ke=ee.stack.split(`
`),be=ae.length-1,ge=ke.length-1;be>=1&&ge>=0&&ae[be]!==ke[ge];)ge--;for(;be>=1&&ge>=0;be--,ge--)if(ae[be]!==ke[ge]){if(be!==1||ge!==1)do if(be--,ge--,ge<0||ae[be]!==ke[ge]){var Fe=`
`+ae[be].replace(" at new "," at ");return d.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",d.displayName)),typeof d=="function"&&ve.set(d,Fe),Fe}while(be>=1&&ge>=0);break}}}finally{fe=!1,Ce.current=ce,me(),Error.prepareStackTrace=oe}var He=d?d.displayName||d.name:"",Ge=He?xe(He):"";return typeof d=="function"&&ve.set(d,Ge),Ge}function je(d,P,K){return H(d,!1)}function Ae(d){var P=d.prototype;return!!(P&&P.isReactComponent)}function Pe(d,P,K){if(d==null)return"";if(typeof d=="function")return H(d,Ae(d));if(typeof d=="string")return xe(d);switch(d){case h:return xe("Suspense");case f:return xe("SuspenseList")}if(typeof d=="object")switch(d.$$typeof){case i:return je(d.render);case x:return Pe(d.type,P,K);case v:{var ee=d,oe=ee._payload,ce=ee._init;try{return Pe(ce(oe),P,K)}catch{}}}return""}var de=Object.prototype.hasOwnProperty,De={},Oe=B.ReactDebugCurrentFrame;function _e(d){if(d){var P=d._owner,K=Pe(d.type,d._source,P?P.type:null);Oe.setExtraStackFrame(K)}else Oe.setExtraStackFrame(null)}function Re(d,P,K,ee,oe){{var ce=Function.call.bind(de);for(var le in d)if(ce(d,le)){var ae=void 0;try{if(typeof d[le]!="function"){var ke=Error((ee||"React class")+": "+K+" type `"+le+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof d[le]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ke.name="Invariant Violation",ke}ae=d[le](P,le,ee,K,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(be){ae=be}ae&&!(ae instanceof Error)&&(_e(oe),$("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ee||"React class",K,le,typeof ae),_e(null)),ae instanceof Error&&!(ae.message in De)&&(De[ae.message]=!0,_e(oe),$("Failed %s type: %s",K,ae.message),_e(null))}}}var et=Array.isArray;function Te(d){return et(d)}function tt(d){{var P=typeof Symbol=="function"&&Symbol.toStringTag,K=P&&d[Symbol.toStringTag]||d.constructor.name||"Object";return K}}function st(d){try{return Le(d),!1}catch{return!0}}function Le(d){return""+d}function rt(d){if(st(d))return $("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",tt(d)),Le(d)}var Ve=B.ReactCurrentOwner,O={key:!0,ref:!0,__self:!0,__source:!0},re,ue;function we(d){if(de.call(d,"ref")){var P=Object.getOwnPropertyDescriptor(d,"ref").get;if(P&&P.isReactWarning)return!1}return d.ref!==void 0}function G(d){if(de.call(d,"key")){var P=Object.getOwnPropertyDescriptor(d,"key").get;if(P&&P.isReactWarning)return!1}return d.key!==void 0}function Z(d,P){typeof d.ref=="string"&&Ve.current}function he(d,P){{var K=function(){re||(re=!0,$("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",P))};K.isReactWarning=!0,Object.defineProperty(d,"key",{get:K,configurable:!0})}}function Ne(d,P){{var K=function(){ue||(ue=!0,$("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",P))};K.isReactWarning=!0,Object.defineProperty(d,"ref",{get:K,configurable:!0})}}var ze=function(d,P,K,ee,oe,ce,le){var ae={$$typeof:s,type:d,key:P,ref:K,props:le,_owner:ce};return ae._store={},Object.defineProperty(ae._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ae,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ee}),Object.defineProperty(ae,"_source",{configurable:!1,enumerable:!1,writable:!1,value:oe}),Object.freeze&&(Object.freeze(ae.props),Object.freeze(ae)),ae};function at(d,P,K,ee,oe){{var ce,le={},ae=null,ke=null;K!==void 0&&(rt(K),ae=""+K),G(P)&&(rt(P.key),ae=""+P.key),we(P)&&(ke=P.ref,Z(P,oe));for(ce in P)de.call(P,ce)&&!O.hasOwnProperty(ce)&&(le[ce]=P[ce]);if(d&&d.defaultProps){var be=d.defaultProps;for(ce in be)le[ce]===void 0&&(le[ce]=be[ce])}if(ae||ke){var ge=typeof d=="function"?d.displayName||d.name||"Unknown":d;ae&&he(le,ge),ke&&Ne(le,ge)}return ze(d,ae,ke,oe,ee,Ve.current,le)}}var nt=B.ReactCurrentOwner,as=B.ReactDebugCurrentFrame;function qe(d){if(d){var P=d._owner,K=Pe(d.type,d._source,P?P.type:null);as.setExtraStackFrame(K)}else as.setExtraStackFrame(null)}var St;St=!1;function Et(d){return typeof d=="object"&&d!==null&&d.$$typeof===s}function ns(){{if(nt.current){var d=k(nt.current.type);if(d)return`

Check the render method of \``+d+"`."}return""}}function ca(d){return""}var ls={};function da(d){{var P=ns();if(!P){var K=typeof d=="string"?d:d.displayName||d.name;K&&(P=`

Check the top-level render call using <`+K+">.")}return P}}function os(d,P){{if(!d._store||d._store.validated||d.key!=null)return;d._store.validated=!0;var K=da(P);if(ls[K])return;ls[K]=!0;var ee="";d&&d._owner&&d._owner!==nt.current&&(ee=" It was passed a child from "+k(d._owner.type)+"."),qe(d),$('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',K,ee),qe(null)}}function is(d,P){{if(typeof d!="object")return;if(Te(d))for(var K=0;K<d.length;K++){var ee=d[K];Et(ee)&&os(ee,P)}else if(Et(d))d._store&&(d._store.validated=!0);else if(d){var oe=N(d);if(typeof oe=="function"&&oe!==d.entries)for(var ce=oe.call(d),le;!(le=ce.next()).done;)Et(le.value)&&os(le.value,P)}}}function ua(d){{var P=d.type;if(P==null||typeof P=="string")return;var K;if(typeof P=="function")K=P.propTypes;else if(typeof P=="object"&&(P.$$typeof===i||P.$$typeof===x))K=P.propTypes;else return;if(K){var ee=k(P);Re(K,d.props,"prop",ee,d)}else if(P.PropTypes!==void 0&&!St){St=!0;var oe=k(P);$("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",oe||"Unknown")}typeof P.getDefaultProps=="function"&&!P.getDefaultProps.isReactClassApproved&&$("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ma(d){{for(var P=Object.keys(d.props),K=0;K<P.length;K++){var ee=P[K];if(ee!=="children"&&ee!=="key"){qe(d),$("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ee),qe(null);break}}d.ref!==null&&(qe(d),$("Invalid attribute `ref` supplied to `React.Fragment`."),qe(null))}}var cs={};function ds(d,P,K,ee,oe,ce){{var le=I(d);if(!le){var ae="";(d===void 0||typeof d=="object"&&d!==null&&Object.keys(d).length===0)&&(ae+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ke=ca();ke?ae+=ke:ae+=ns();var be;d===null?be="null":Te(d)?be="array":d!==void 0&&d.$$typeof===s?(be="<"+(k(d.type)||"Unknown")+" />",ae=" Did you accidentally export a JSX literal instead of a component?"):be=typeof d,$("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",be,ae)}var ge=at(d,P,K,oe,ce);if(ge==null)return ge;if(le){var Fe=P.children;if(Fe!==void 0)if(ee)if(Te(Fe)){for(var He=0;He<Fe.length;He++)is(Fe[He],d);Object.freeze&&Object.freeze(Fe)}else $("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else is(Fe,d)}if(de.call(P,"key")){var Ge=k(d),Se=Object.keys(P).filter(function(pa){return pa!=="key"}),Tt=Se.length>0?"{key: someKey, "+Se.join(": ..., ")+": ...}":"{key: someKey}";if(!cs[Ge+Tt]){var ga=Se.length>0?"{"+Se.join(": ..., ")+": ...}":"{}";$(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Tt,Ge,ga,Ge),cs[Ge+Tt]=!0}}return d===n?ma(ge):ua(ge),ge}}function xa(d,P,K){return ds(d,P,K,!0)}function fa(d,P,K){return ds(d,P,K,!1)}var ha=fa,ba=xa;Je.Fragment=n,Je.jsx=ha,Je.jsxs=ba}()),Je}var $t;function xs(){return $t||($t=1,process.env.NODE_ENV==="production"?lt.exports=us():lt.exports=ms()),lt.exports}var e=xs();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ee=(t,s)=>{const r=c.forwardRef(({color:n="currentColor",size:l=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:u="",children:i,...h},f)=>c.createElement("svg",{ref:f,...fs,width:l,height:l,stroke:n,strokeWidth:o?Number(a)*24/Number(l):a,className:["lucide",`lucide-${hs(t)}`,u].join(" "),...h},[...s.map(([x,v])=>c.createElement(x,v)),...Array.isArray(i)?i:[i]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ee("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ss=({context:t="neutral",workspaces:s=[],currentWorkspace:r,onWorkspaceChange:n,user:l,notifications:a=[],onNotificationClick:o,primaryActions:u=[],secondaryActions:i=[],responsive:h=!0,onMobileMenuClick:f,onSearch:x,showSearch:v=!0,onSignOut:A,className:T})=>{const[E,N]=c.useState(!1),[B,$]=c.useState(!1),[S,b]=c.useState(""),m={consultant:"bg-blue-50 border-blue-200",client:"bg-green-50 border-green-200",admin:"bg-gray-50 border-gray-200",expert:"bg-purple-50 border-purple-200","tool-creator":"bg-orange-50 border-orange-200",founder:"bg-amber-50 border-amber-200",neutral:"bg-white border-gray-200"},w=a.filter(g=>!g.read).length,M=g=>{g.preventDefault(),x&&S.trim()&&x(S.trim())},C=g=>{o&&o(g),$(!1)};return e.jsxs("header",{className:R.cn("border-b shadow-sm transition-colors duration-200",m[t],T),role:"banner",children:[e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[h&&f&&e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:f,className:"lg:hidden","aria-label":"Open mobile menu",children:e.jsx(ws,{className:"w-5 h-5"})}),e.jsx(F.Logo,{variant:"full",size:"sm",className:"transition-transform hover:scale-105"}),s.length>0&&r&&n&&e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg",children:r.name})})]}),v&&x&&e.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:e.jsxs("form",{onSubmit:M,className:"relative w-full",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search...",value:S,onChange:g=>b(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm","aria-label":"Search"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.map(g=>e.jsxs(F.Button,{variant:"ghost",size:"sm",onClick:g.onClick,disabled:g.disabled,className:"hidden md:flex","aria-label":g.label,children:[g.icon&&e.jsx(g.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2",children:g.label}),g.badge&&g.badge>0&&e.jsx(F.Badge,{variant:"secondary",className:"ml-2",children:g.badge})]},g.id)),e.jsxs("div",{className:"relative",children:[e.jsxs(F.Button,{variant:"ghost",size:"sm",onClick:()=>$(!B),className:"relative","aria-label":`Notifications ${w>0?`(${w} unread)`:""}`,children:[e.jsx(bs,{className:"w-5 h-5"}),w>0&&e.jsx(F.Badge,{variant:"error",className:"absolute -top-1 -right-1 w-5 h-5 text-xs flex items-center justify-center p-0",children:w>9?"9+":w})]}),B&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"})}),a.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):e.jsx("div",{className:"py-2",children:a.slice(0,10).map(g=>e.jsx("button",{onClick:()=>C(g),className:R.cn("w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",!g.read&&"bg-blue-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:R.cn("w-2 h-2 rounded-full mt-2 flex-shrink-0",g.read?"bg-gray-300":"bg-blue-500")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:g.title}),e.jsx("p",{className:"text-gray-600 text-sm truncate",children:g.message}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:g.timestamp.toLocaleDateString()})]})]})},g.id))})]})]}),e.jsx(F.Button,{variant:"ghost",size:"sm",className:"hidden md:flex","aria-label":"Settings",children:e.jsx(zt,{className:"w-5 h-5"})}),l&&e.jsxs("div",{className:"relative",children:[e.jsxs(F.Button,{variant:"ghost",onClick:()=>N(!E),className:"flex items-center gap-2 px-2","aria-label":"User menu","aria-expanded":E,children:[e.jsx(F.Avatar,{src:l.avatar,alt:l.name,fallback:l.name.charAt(0),size:"sm"}),e.jsxs("div",{className:"text-left hidden lg:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:l.role})]}),e.jsx(gs,{className:"w-4 h-4 text-gray-400"})]}),E&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-900",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left",children:[e.jsx(ks,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left",children:[e.jsx(zt,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left",children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx("span",{children:"Help"})]}),e.jsx("hr",{className:"my-1"}),A&&e.jsxs("button",{onClick:A,className:"flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[e.jsx(js,{className:"w-4 h-4"}),e.jsx("span",{children:"Sign Out"})]})]})]})]})]})]}),s.length>0&&r&&n&&e.jsx("div",{className:"md:hidden mt-3",children:e.jsx("div",{className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg",children:r.name})})]}),(E||B)&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{N(!1),$(!1)},"aria-hidden":"true"})]})},Mt={consultant:"text-blue-600 hover:text-blue-700 border-blue-200",client:"text-green-600 hover:text-green-700 border-green-200",admin:"text-red-600 hover:text-red-700 border-red-200",expert:"text-purple-600 hover:text-purple-700 border-purple-200","tool-creator":"text-orange-600 hover:text-orange-700 border-orange-200",founder:"text-amber-600 hover:text-amber-700 border-amber-200",neutral:"text-gray-600 hover:text-gray-700 border-gray-200"},Es=({context:t="neutral",items:s,maxItems:r=5,separator:n,onItemClick:l,responsive:a=!0,generateFromPath:o=!1,workspaceScoped:u=!1,className:i,showHome:h=!0,...f})=>{const x=c.useMemo(()=>{if(s.length<=r)return s;const E=s[0],N=s.slice(-(r-2));return[E,{id:"ellipsis",label:"...",disabled:!0},...N]},[s,r]),v=E=>{E.disabled||E.id==="ellipsis"||l==null||l(E)},A=()=>n||e.jsx(Pt,{className:"h-4 w-4 text-gray-400"}),T=(E,N)=>{const B="inline-flex items-center gap-1 text-sm transition-colors";if(E.disabled||E.id==="ellipsis")return R.cn(B,"text-gray-400 cursor-default");if(N)return R.cn(B,"text-gray-900 font-medium cursor-default");const $=Mt[E.workspaceContext||t];return R.cn(B,"hover:underline cursor-pointer",$)};return e.jsx("nav",{className:R.cn("flex items-center space-x-1 text-sm",a&&"flex-wrap",i),"aria-label":"Breadcrumb",...f,children:e.jsxs("ol",{className:"flex items-center space-x-1",children:[h&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>l==null?void 0:l({id:"home",label:"Home",path:"/"}),className:R.cn("inline-flex items-center text-sm transition-colors hover:underline",Mt[t]),"aria-label":"Home",children:e.jsx(vs,{className:"h-4 w-4"})})}),x.length>0&&e.jsx("li",{className:"flex items-center",children:A()})]}),x.map((E,N)=>{const B=N===x.length-1;return e.jsxs(c.Fragment,{children:[e.jsx("li",{children:E.path&&!E.disabled&&!B?e.jsxs("button",{onClick:()=>v(E),className:T(E,B),"aria-current":B?"page":void 0,children:[E.icon&&e.jsx("span",{className:"h-4 w-4","aria-hidden":"true",children:E.icon}),e.jsx("span",{className:a?"truncate max-w-[120px] sm:max-w-none":"",children:E.label})]}):e.jsxs("span",{className:T(E,B),"aria-current":B?"page":void 0,children:[E.icon&&e.jsx("span",{className:"h-4 w-4","aria-hidden":"true",children:E.icon}),e.jsx("span",{className:a?"truncate max-w-[120px] sm:max-w-none":"",children:E.label})]})}),!B&&e.jsx("li",{className:"flex items-center","aria-hidden":"true",children:A()})]},E.id)})]})})},Ts={consultant:{active:"border-blue-500 text-blue-600",inactive:"text-gray-500 hover:text-blue-600 hover:border-blue-300",background:"bg-blue-50"},client:{active:"border-green-500 text-green-600",inactive:"text-gray-500 hover:text-green-600 hover:border-green-300",background:"bg-green-50"},admin:{active:"border-red-500 text-red-600",inactive:"text-gray-500 hover:text-red-600 hover:border-red-300",background:"bg-red-50"},expert:{active:"border-purple-500 text-purple-600",inactive:"text-gray-500 hover:text-purple-600 hover:border-purple-300",background:"bg-purple-50"},"tool-creator":{active:"border-orange-500 text-orange-600",inactive:"text-gray-500 hover:text-orange-600 hover:border-orange-300",background:"bg-orange-50"},founder:{active:"border-amber-500 text-amber-600",inactive:"text-gray-500 hover:text-amber-600 hover:border-amber-300",background:"bg-amber-50"},neutral:{active:"border-gray-500 text-gray-900",inactive:"text-gray-500 hover:text-gray-700 hover:border-gray-300",background:"bg-gray-50"}},ut={line:{tabList:"border-b border-gray-200",tab:"border-b-2 border-transparent px-4 py-2",activeTab:"border-b-2"},card:{tabList:"bg-gray-100 p-1 rounded-lg",tab:"px-3 py-1.5 rounded-md",activeTab:"bg-white shadow-sm"},pill:{tabList:"space-x-1",tab:"px-3 py-1.5 rounded-full",activeTab:"shadow-sm"}},Fs={sm:"text-xs",md:"text-sm",lg:"text-base"},As=({context:t="neutral",tabs:s,activeTab:r,onTabChange:n,onTabClose:l,variant:a="line",size:o="md",scrollable:u=!0,responsive:i=!0,lazy:h=!1,permissions:f=[],className:x,tabListClassName:v,tabPanelClassName:A,showContent:T=!0,...E})=>{var U;const[N,B]=c.useState(r||((U=s[0])==null?void 0:U.id)),[$,S]=c.useState(!1),[b,m]=c.useState(!1),[w,M]=c.useState(!1),C=c.useRef(null),[g,I]=c.useState(new Set([N])),V=r||N,q=c.useMemo(()=>s.filter(z=>z.permission?f.includes(z.permission):!0),[s,f]),k=c.useCallback(()=>{if(!C.current||!u)return;const{scrollLeft:z,scrollWidth:J,clientWidth:Q}=C.current;m(z>0),M(z<J-Q-1),S(J>Q)},[u]);c.useEffect(()=>{k();const z=()=>k();return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[k,q]),c.useEffect(()=>{h&&V&&!g.has(V)&&I(z=>new Set([...z,V]))},[V,h,g]);const L=z=>{if(z.disabled)return;const J=z.id;B(J),n==null||n(z),h&&!g.has(J)&&I(Q=>new Set([...Q,J]))},y=(z,J)=>{J.stopPropagation(),l==null||l(z)},j=z=>{if(!C.current)return;const J=200,Q=z==="left"?C.current.scrollLeft-J:C.current.scrollLeft+J;C.current.scrollTo({left:Q,behavior:"smooth"}),setTimeout(k,300)},D=(z,J)=>{const Q=R.cn("inline-flex items-center gap-2 font-medium transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2",Fs[o],ut[a].tab);if(z.disabled)return R.cn(Q,"opacity-50 cursor-not-allowed text-gray-400");const ne=Ts[z.workspaceContext||t];return J?R.cn(Q,ut[a].activeTab,ne.active,a==="card"||a==="pill"?ne.background:""):R.cn(Q,ne.inactive)},p=z=>z?e.jsx("span",{className:R.cn("inline-flex items-center justify-center px-1.5 py-0.5 rounded-full text-xs font-medium","bg-red-100 text-red-800 min-w-[1.25rem] h-5"),children:z>99?"99+":z}):null,_=q.find(z=>z.id===V);return e.jsxs("div",{className:R.cn("w-full",x),...E,children:[e.jsxs("div",{className:"relative",children:[$&&b&&e.jsx("button",{onClick:()=>j("left"),className:R.cn("absolute left-0 top-0 z-10 h-full px-2 bg-white shadow-md","flex items-center justify-center hover:bg-gray-50","border-r border-gray-200"),"aria-label":"Scroll tabs left",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("div",{ref:C,className:R.cn("flex overflow-x-auto scrollbar-hide",ut[a].tabList,u&&$&&b&&"pl-10",u&&$&&w&&"pr-10",v),role:"tablist",onScroll:k,children:q.map(z=>{const J=z.id===V;return e.jsxs("button",{role:"tab","aria-selected":J,"aria-controls":`tabpanel-${z.id}`,tabIndex:J?0:-1,className:D(z,J),onClick:()=>L(z),disabled:z.disabled,children:[z.icon&&e.jsx("span",{className:"h-4 w-4 flex-shrink-0","aria-hidden":"true",children:z.icon}),e.jsx("span",{className:i?"truncate max-w-[120px] sm:max-w-none":"",children:z.label}),z.badge&&p(z.badge),z.closable&&e.jsx("button",{onClick:Q=>y(z,Q),className:R.cn("ml-1 p-0.5 rounded hover:bg-gray-200 transition-colors","focus:outline-none focus:ring-1 focus:ring-gray-400"),"aria-label":`Close ${z.label} tab`,children:e.jsx(Cs,{className:"h-3 w-3"})})]},z.id)})}),$&&w&&e.jsx("button",{onClick:()=>j("right"),className:R.cn("absolute right-0 top-0 z-10 h-full px-2 bg-white shadow-md","flex items-center justify-center hover:bg-gray-50","border-l border-gray-200"),"aria-label":"Scroll tabs right",children:e.jsx(Pt,{className:"h-4 w-4"})})]}),T&&_&&e.jsx("div",{role:"tabpanel",id:`tabpanel-${_.id}`,"aria-labelledby":`tab-${_.id}`,className:R.cn("mt-4",A),children:h?g.has(_.id)&&_.content:_.content})]})},$s=({workspace:t,context:s="neutral",user:r,permissions:n=[],features:l=[],onNavigate:a,onWorkspaceChange:o,responsive:u=!0,collapsed:i=!1,className:h})=>{var S,b;const[f,x]=c.useState(new Set),v=c.useCallback(m=>m.filter(w=>!(w.permission&&!n.includes(w.permission)||w.workspaceContext&&w.workspaceContext!==s&&w.workspaceContext!=="neutral"||w.disabled)).map(w=>({...w,children:w.children?v(w.children):void 0})),[n,s]),A=c.useCallback(()=>{const m="transition-colors duration-200";switch(s){case"consultant":return`${m} bg-blue-50 border-blue-200 text-blue-900`;case"client":return`${m} bg-green-50 border-green-200 text-green-900`;case"admin":return`${m} bg-gray-50 border-gray-200 text-gray-900`;case"expert":return`${m} bg-purple-50 border-purple-200 text-purple-900`;case"tool-creator":return`${m} bg-orange-50 border-orange-200 text-orange-900`;case"founder":return`${m} bg-amber-50 border-amber-200 text-amber-900`;default:return`${m} bg-white border-gray-200 text-gray-900`}},[s]),T=c.useCallback(m=>{x(w=>{const M=new Set(w);return M.has(m)?M.delete(m):M.add(m),M})},[]),E=c.useCallback(m=>{m.children&&m.children.length>0?T(m.id):m.path&&a&&a(m.path)},[a,T]),N=c.useCallback((m,w=0)=>{const M=m.children&&m.children.length>0,C=f.has(m.id),g=M?v(m.children):[];return e.jsxs("div",{className:"w-full",children:[e.jsxs("button",{onClick:()=>E(m),className:R.cn("w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200","hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-offset-2",w>0&&"ml-4 text-xs",m.active&&"bg-opacity-100 font-semibold",!m.active&&"hover:bg-gray-100",i&&w===0&&"justify-center px-2"),style:{paddingLeft:i?void 0:`${.75+w*1}rem`},"aria-expanded":M?C:void 0,"aria-label":m.label,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[m.icon&&e.jsx("span",{className:"flex-shrink-0 w-4 h-4","aria-hidden":"true",children:e.jsx("div",{className:"w-4 h-4 bg-current opacity-60 rounded-sm"})}),!i&&e.jsx("span",{className:"truncate",children:m.label})]}),!i&&e.jsxs("div",{className:"flex items-center space-x-1",children:[m.badge&&m.badge>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:m.badge>99?"99+":m.badge}),M&&e.jsx("span",{className:R.cn("flex-shrink-0 w-4 h-4 transition-transform duration-200",C&&"transform rotate-90"),children:e.jsx("div",{className:"w-0 h-0 border-l-4 border-l-current border-y-2 border-y-transparent"})})]})]}),M&&C&&!i&&e.jsx("div",{className:"mt-1 space-y-1",children:g.map(I=>N(I,w+1))})]},m.id)},[f,v,E,i]),B=v(t.navigation),$=l.filter(m=>m.enabled&&(!m.permission||n.includes(m.permission))&&(!m.workspaceContext||m.workspaceContext===s||m.workspaceContext==="neutral"));return e.jsxs("nav",{className:R.cn("flex flex-col h-full border-r",A(),u&&"lg:w-64",i?"w-16":"w-64",h),"aria-label":`${t.name} navigation`,children:[e.jsxs("div",{className:R.cn("flex items-center justify-between p-4 border-b border-current border-opacity-20",i&&"justify-center px-2"),children:[!i&&e.jsxs("div",{className:"flex items-center space-x-3",children:[((S=t.branding)==null?void 0:S.logo)&&e.jsx("img",{src:t.branding.logo,alt:`${t.name} logo`,className:"w-8 h-8 rounded"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-sm font-semibold truncate",children:t.name}),e.jsx("p",{className:"text-xs opacity-75 capitalize",children:t.type})]})]}),((b=t.branding)==null?void 0:b.logo)&&i&&e.jsx("img",{src:t.branding.logo,alt:`${t.name} logo`,className:"w-8 h-8 rounded"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:B.map(m=>N(m))}),$.length>0&&!i&&e.jsxs("div",{className:"border-t border-current border-opacity-20 p-2",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide opacity-75 mb-2",children:"Features"}),e.jsx("div",{className:"space-y-1",children:$.map(m=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-1 text-xs",children:[e.jsx("span",{className:"truncate",children:m.name}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]},m.id))})]}),!i&&e.jsx("div",{className:"border-t border-current border-opacity-20 p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[r.avatar?e.jsx("img",{src:r.avatar,alt:r.name,className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 bg-current bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold",children:r.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:r.name}),e.jsx("p",{className:"text-xs opacity-75 truncate",children:r.role})]})]})})]})},Ps=({client:t,projects:s,currentProject:r,onProjectChange:n,onNavigate:l,permissions:a=[],responsive:o=!0,notifications:u=[],className:i})=>{const[h,f]=c.useState("overview"),x=u.filter(S=>!S.read).length,v=r||s[0],A=c.useCallback((S,b)=>{f(b),l&&l(S)},[l]),T=c.useCallback(S=>{n&&n(S)},[n]),E=c.useCallback(S=>{switch(S){case"active":return"text-green-600 bg-green-100";case"completed":return"text-blue-600 bg-blue-100";case"on-hold":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},[]),N=c.useCallback(S=>{switch(S){case"urgent":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}},[]),$=[{id:"overview",label:"Project Overview",icon:"home",path:"/overview",description:"View project status and updates"},{id:"documents",label:"Documents",icon:"file",path:"/documents",description:"Access project files and deliverables",badge:v?Math.floor(Math.random()*10)+1:0},{id:"communications",label:"Messages",icon:"message",path:"/messages",description:"Communicate with your consultant",badge:x},{id:"timeline",label:"Timeline",icon:"calendar",path:"/timeline",description:"View project milestones and deadlines"},{id:"billing",label:"Billing",icon:"credit-card",path:"/billing",description:"View invoices and payment history",permission:"billing"},{id:"feedback",label:"Feedback",icon:"star",path:"/feedback",description:"Provide feedback and reviews"}].filter(S=>!S.permission||a.includes(S.permission));return e.jsxs("nav",{className:R.cn("flex flex-col h-full bg-green-50 border-r border-green-200 text-green-900",o&&"lg:w-80","w-80",i),"aria-label":"Client navigation",children:[e.jsx("div",{className:"p-6 border-b border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[t.avatar?e.jsx("img",{src:t.avatar,alt:t.name,className:"w-12 h-12 rounded-full border-2 border-green-300"}):e.jsx("div",{className:"w-12 h-12 bg-green-200 rounded-full flex items-center justify-center border-2 border-green-300",children:e.jsx("span",{className:"text-lg font-semibold text-green-700",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-green-900 truncate",children:t.name}),e.jsx("p",{className:"text-sm text-green-700 truncate",children:t.company}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:R.cn("w-2 h-2 rounded-full mr-2",t.status==="active"?"bg-green-500":t.status==="pending"?"bg-yellow-500":"bg-gray-400")}),e.jsx("span",{className:"text-xs text-green-600 capitalize",children:t.status})]})]})]})}),s.length>0&&e.jsxs("div",{className:"p-4 border-b border-green-200",children:[e.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2",children:"Current Project"}),e.jsx("select",{value:(v==null?void 0:v.id)||"",onChange:S=>{const b=s.find(m=>m.id===S.target.value);b&&T(b)},className:"w-full px-3 py-2 text-sm border border-green-300 rounded-md bg-white text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:s.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))}),v&&e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-md border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:R.cn("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",E(v.status)),children:v.status.replace("-"," ")}),e.jsxs("span",{className:R.cn("text-xs font-medium",N(v.priority)),children:[v.priority," priority"]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-green-700 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[v.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${v.progress}%`}})})]}),v.dueDate&&e.jsxs("p",{className:"text-xs text-green-600",children:["Due: ",new Date(v.dueDate).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:$.map(S=>e.jsxs("button",{onClick:()=>A(S.path,S.id),className:R.cn("w-full flex items-center justify-between p-3 text-left rounded-lg transition-colors duration-200","hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",h===S.id?"bg-green-200 text-green-900 font-medium":"text-green-800 hover:text-green-900"),"aria-label":S.label,children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-5 h-5 mt-0.5",children:e.jsx("div",{className:"w-5 h-5 bg-current opacity-60 rounded-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:S.label}),e.jsx("p",{className:"text-xs opacity-75 truncate",children:S.description})]})]}),S.badge&&S.badge>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full ml-2",children:S.badge>99?"99+":S.badge})]},S.id))}),e.jsxs("div",{className:"border-t border-green-200 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>A("/support","support"),className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-green-700 hover:text-green-900 hover:bg-green-100 rounded-md transition-colors duration-200",children:[e.jsx("div",{className:"w-4 h-4 bg-current opacity-60 rounded-sm"}),e.jsx("span",{children:"Contact Support"})]}),e.jsxs("button",{onClick:()=>A("/help","help"),className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-green-700 hover:text-green-900 hover:bg-green-100 rounded-md transition-colors duration-200",children:[e.jsx("div",{className:"w-4 h-4 bg-current opacity-60 rounded-sm"}),e.jsx("span",{children:"Help Center"})]})]})]}),u.length>0&&e.jsxs("div",{className:"border-t border-green-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Recent Updates"}),x>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:x})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:u.slice(0,3).map(S=>e.jsxs("div",{className:R.cn("p-2 rounded-md text-xs",S.read?"bg-green-100 text-green-700":"bg-white text-green-800 border border-green-200"),children:[e.jsx("p",{className:"font-medium truncate",children:S.title}),e.jsx("p",{className:"opacity-75 truncate",children:S.message})]},S.id))}),u.length>3&&e.jsx("button",{onClick:()=>A("/notifications","notifications"),className:"w-full mt-2 text-xs text-green-600 hover:text-green-800 text-center",children:"View all notifications"})]})]})},zs=({consultant:t,clients:s,activeWorkspaces:r,onClientSelect:n,onWorkspaceSelect:l,onNavigate:a,permissions:o=[],responsive:u=!0,analytics:i,className:h})=>{const[f,x]=c.useState("dashboard"),[v,A]=c.useState(new Set(["clients"])),T=c.useCallback((b,m)=>{x(m),a&&a(b)},[a]),E=c.useCallback(b=>{A(m=>{const w=new Set(m);return w.has(b)?w.delete(b):w.add(b),w})},[]),N=c.useCallback(b=>{switch(b){case"active":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}},[]),B=c.useCallback(b=>{switch(b){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},[]),S=[{id:"main",title:"Main",items:[{id:"dashboard",label:"Dashboard",icon:"dashboard",path:"/dashboard",description:"Overview and key metrics"},{id:"calendar",label:"Calendar",icon:"calendar",path:"/calendar",description:"Schedule and appointments",badge:3},{id:"tasks",label:"Tasks",icon:"check-square",path:"/tasks",description:"Action items and to-dos",badge:8}]},{id:"clients",title:"Client Management",expandable:!0,items:[{id:"clients-overview",label:"All Clients",icon:"users",path:"/clients",description:"Manage client relationships",badge:s.length},{id:"active-projects",label:"Active Projects",icon:"folder",path:"/projects/active",description:"Current project work",badge:r.length},{id:"proposals",label:"Proposals",icon:"file-text",path:"/proposals",description:"Pending and sent proposals",permission:"proposals"},{id:"contracts",label:"Contracts",icon:"file-signature",path:"/contracts",description:"Client agreements",permission:"contracts"}]},{id:"business",title:"Business Operations",expandable:!0,items:[{id:"billing",label:"Billing & Invoices",icon:"credit-card",path:"/billing",description:"Financial management",permission:"billing",badge:2},{id:"time-tracking",label:"Time Tracking",icon:"clock",path:"/time",description:"Log and manage time",permission:"time-tracking"},{id:"analytics",label:"Analytics",icon:"chart",path:"/analytics",description:"Performance insights",permission:"analytics"},{id:"reports",label:"Reports",icon:"bar-chart",path:"/reports",description:"Business reports",permission:"reports"}]},{id:"tools",title:"Tools & Resources",expandable:!0,items:[{id:"knowledge-base",label:"Knowledge Base",icon:"book",path:"/knowledge",description:"Resources and documentation"},{id:"templates",label:"Templates",icon:"layout",path:"/templates",description:"Reusable templates"},{id:"integrations",label:"Integrations",icon:"link",path:"/integrations",description:"Connected services",permission:"integrations"}]}].map(b=>({...b,items:b.items.filter(m=>!m.permission||o.includes(m.permission))})).filter(b=>b.items.length>0);return e.jsxs("nav",{className:R.cn("flex flex-col h-full bg-blue-50 border-r border-blue-200 text-blue-900",u&&"lg:w-80","w-80",h),"aria-label":"Consultant navigation",children:[e.jsx("div",{className:"p-6 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[t.avatar?e.jsx("img",{src:t.avatar,alt:t.name,className:"w-12 h-12 rounded-full border-2 border-blue-300"}):e.jsx("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center border-2 border-blue-300",children:e.jsx("span",{className:"text-lg font-semibold text-blue-700",children:t.name.charAt(0).toUpperCase()})}),e.jsx("div",{className:R.cn("absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white",N(t.status))})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 truncate",children:t.name}),e.jsx("p",{className:"text-sm text-blue-700 truncate",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[t.specialties.slice(0,2).map(b=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:b},b)),t.specialties.length>2&&e.jsxs("span",{className:"text-xs text-blue-600",children:["+",t.specialties.length-2," more"]})]})]})]})}),i&&e.jsxs("div",{className:"p-4 border-b border-blue-200",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white p-3 rounded-md border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Active Clients"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:i.activeClients})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"This Month"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:[i.hoursThisMonth,"h"]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:["$",i.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Satisfaction"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:[i.clientSatisfaction,"%"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:S.map(b=>e.jsxs("div",{children:[b.expandable?e.jsxs("button",{onClick:()=>E(b.id),className:"w-full flex items-center justify-between mb-3 text-sm font-medium text-blue-800 hover:text-blue-900",children:[e.jsx("span",{children:b.title}),e.jsx("span",{className:R.cn("w-4 h-4 transition-transform duration-200",v.has(b.id)&&"transform rotate-90"),children:e.jsx("div",{className:"w-0 h-0 border-l-4 border-l-current border-y-2 border-y-transparent"})})]}):e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-3",children:b.title}),(!b.expandable||v.has(b.id))&&e.jsx("div",{className:"space-y-1",children:b.items.map(m=>e.jsxs("button",{onClick:()=>T(m.path,m.id),className:R.cn("w-full flex items-center justify-between p-3 text-left rounded-lg transition-colors duration-200","hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",f===m.id?"bg-blue-200 text-blue-900 font-medium":"text-blue-800 hover:text-blue-900"),"aria-label":m.label,children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-5 h-5 mt-0.5",children:e.jsx("div",{className:"w-5 h-5 bg-current opacity-60 rounded-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:m.label}),e.jsx("p",{className:"text-xs opacity-75 truncate",children:m.description})]})]}),m.badge&&m.badge>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full ml-2",children:m.badge>99?"99+":m.badge})]},m.id))})]},b.id))}),s.length>0&&e.jsxs("div",{className:"border-t border-blue-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Recent Clients"}),e.jsx("button",{onClick:()=>T("/clients","clients-overview"),className:"text-xs text-blue-600 hover:text-blue-800",children:"View all"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:s.slice(0,4).map(b=>e.jsxs("button",{onClick:()=>n&&n(b),className:"w-full flex items-center space-x-3 p-2 text-left rounded-md hover:bg-blue-100 transition-colors duration-200",children:[b.avatar?e.jsx("img",{src:b.avatar,alt:b.name,className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-700",children:b.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:b.name}),e.jsx("p",{className:"text-xs text-blue-600 truncate",children:b.company})]}),e.jsx("span",{className:R.cn("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",B(b.priority)),children:b.priority})]},b.id))})]}),r.length>0&&e.jsxs("div",{className:"border-t border-blue-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Active Workspaces"}),e.jsxs("span",{className:"text-xs text-blue-600",children:[r.length," active"]})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:r.slice(0,3).map(b=>e.jsxs("button",{onClick:()=>l&&l(b),className:"w-full flex items-center justify-between p-2 text-left rounded-md hover:bg-blue-100 transition-colors duration-200",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:b.name}),e.jsxs("p",{className:"text-xs text-blue-600",children:[b.hoursLogged,"h logged"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs font-medium text-blue-900",children:["$",b.revenue.toLocaleString()]}),e.jsx("div",{className:R.cn("w-2 h-2 rounded-full",b.status==="active"?"bg-green-500":b.status==="paused"?"bg-yellow-500":"bg-gray-400")})]})]},b.id))})]})]})},Ms=({context:t="neutral",items:s,currentPath:r,onItemClick:n,collapsible:l=!0,defaultCollapsed:a=!1,onCollapseChange:o,permissions:u=[],responsive:i=!0,className:h})=>{const[f,x]=c.useState(a),[v,A]=c.useState(new Set),T=c.useCallback(()=>{const m=!f;x(m),o==null||o(m)},[f,o]),E=c.useCallback(m=>{A(w=>{const M=new Set(w);return M.has(m)?M.delete(m):M.add(m),M})},[]),N=c.useCallback(m=>m.filter(w=>!(w.permission&&!u.includes(w.permission)||w.workspaceContext&&w.workspaceContext!==t)).map(w=>({...w,children:w.children?N(w.children):void 0})),[u,t]),B=N(s),$=c.useCallback((m,w)=>{if(w.preventDefault(),!m.disabled){if(m.children&&m.children.length>0){E(m.id);return}n==null||n(m)}},[n,E]),S=c.useCallback(m=>m.active?!0:r&&m.path?r===m.path||r.startsWith(m.path+"/"):!1,[r]),b=c.useCallback((m,w=0)=>{const M=S(m),C=v.has(m.id),g=m.children&&m.children.length>0;return e.jsxs("div",{className:"navigation-item",children:[e.jsxs("button",{onClick:I=>$(m,I),disabled:m.disabled,className:R.cn("w-full flex items-center gap-3 px-3 py-2 text-left transition-colors duration-200","hover:bg-gray-100 dark:hover:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset",{"bg-blue-50 text-blue-700 border-r-2 border-blue-700 dark:bg-blue-900/20 dark:text-blue-300":M,"text-gray-700 dark:text-gray-300":!M&&!m.disabled,"text-gray-400 dark:text-gray-600 cursor-not-allowed":m.disabled,"pl-6":w>0,"pl-9":w>1},{"border-l-4 border-l-blue-500":t==="consultant"&&M,"border-l-4 border-l-green-500":t==="client"&&M,"border-l-4 border-l-purple-500":t==="admin"&&M}),"aria-expanded":g?C:void 0,"aria-current":M?"page":void 0,children:[m.icon&&!f&&e.jsx(F.Icon,{name:m.icon,size:"sm",className:R.cn("flex-shrink-0",{"text-blue-700 dark:text-blue-300":M,"text-gray-500 dark:text-gray-400":!M})}),f&&m.icon&&e.jsx(F.Icon,{name:m.icon,size:"sm",className:R.cn("flex-shrink-0 mx-auto",{"text-blue-700 dark:text-blue-300":M,"text-gray-500 dark:text-gray-400":!M})}),!f&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 truncate",children:m.label}),m.badge&&m.badge>0&&e.jsx("span",{className:R.cn("inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-full",{"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":M,"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200":!M}),children:m.badge>99?"99+":m.badge}),g&&e.jsx(F.Icon,{name:C?"ChevronDown":"ChevronRight",size:"sm",className:"flex-shrink-0 text-gray-400"})]})]}),g&&C&&!f&&e.jsx("div",{className:"ml-3 border-l border-gray-200 dark:border-gray-700",children:m.children.map(I=>b(I,w+1))})]},m.id)},[f,v,$,S,t]);return c.useEffect(()=>{if(!i)return;const m=()=>{window.innerWidth<768&&x(!0)};return window.addEventListener("resize",m),m(),()=>window.removeEventListener("resize",m)},[i]),e.jsxs("nav",{className:R.cn("flex flex-col bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700","transition-all duration-300 ease-in-out",{"w-64":!f,"w-16":f},{"border-r-blue-200 dark:border-r-blue-800":t==="consultant","border-r-green-200 dark:border-r-green-800":t==="client","border-r-purple-200 dark:border-r-purple-800":t==="admin"},h),role:"navigation","aria-label":"Side navigation",children:[l&&e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[!f&&e.jsx("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:"Navigation"}),e.jsx("button",{onClick:T,className:R.cn("p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-blue-500",{"mx-auto":f}),"aria-label":f?"Expand navigation":"Collapse navigation",children:e.jsx(F.Icon,{name:f?"ChevronRight":"ChevronLeft",size:"sm",className:"text-gray-500 dark:text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:B.map(m=>b(m))}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-3",children:f?e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 mx-auto"}):e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[t.charAt(0).toUpperCase()+t.slice(1)," Workspace"]})})]})},Ds=({context:t="neutral",items:s,currentPath:r,onItemClick:n,workspaces:l=[],currentWorkspace:a,onWorkspaceChange:o,user:u,bottomSheet:i=!1,swipeGestures:h=!0,isOpen:f=!1,onToggle:x,className:v})=>{const[A,T]=c.useState(new Set),[E,N]=c.useState(!1),[B,$]=c.useState(null),[S,b]=c.useState(null),m=c.useCallback(y=>{T(j=>{const D=new Set(j);return D.has(y)?D.delete(y):D.add(y),D})},[]),w=c.useCallback((y,j)=>{if(j.preventDefault(),!y.disabled){if(y.children&&y.children.length>0){m(y.id);return}n==null||n(y),x==null||x(!1)}},[n,m,x]),M=c.useCallback(y=>y.active?!0:r&&y.path?r===y.path||r.startsWith(y.path+"/"):!1,[r]),C=c.useCallback(y=>{o==null||o(y),N(!1)},[o]),g=50,I=c.useCallback(y=>{h&&(b(null),$(y.targetTouches[0].clientX))},[h]),V=c.useCallback(y=>{h&&b(y.targetTouches[0].clientX)},[h]),q=c.useCallback(()=>{if(!h||!B||!S)return;const y=B-S,j=y>g,D=y<-g;j&&f?x==null||x(!1):D&&!f&&(x==null||x(!0))},[h,B,S,f,x,g]),k=c.useCallback(()=>{x==null||x(!1)},[x]);c.useEffect(()=>(f?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[f]);const L=c.useCallback((y,j=0)=>{const D=M(y),p=A.has(y.id),_=y.children&&y.children.length>0;return e.jsxs("div",{className:"navigation-item",children:[e.jsxs("button",{onClick:U=>w(y,U),disabled:y.disabled,className:R.cn("w-full flex items-center gap-4 px-4 py-3 text-left transition-colors duration-200","hover:bg-gray-100 dark:hover:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","text-base font-medium",{"bg-blue-50 text-blue-700 border-r-4 border-blue-700 dark:bg-blue-900/20 dark:text-blue-300":D,"text-gray-700 dark:text-gray-300":!D&&!y.disabled,"text-gray-400 dark:text-gray-600 cursor-not-allowed":y.disabled,"pl-8":j>0,"pl-12":j>1},{"border-r-blue-500":t==="consultant"&&D,"border-r-green-500":t==="client"&&D,"border-r-purple-500":t==="admin"&&D}),"aria-expanded":_?p:void 0,"aria-current":D?"page":void 0,children:[y.icon&&e.jsx(F.Icon,{name:y.icon,size:"md",className:R.cn("flex-shrink-0",{"text-blue-700 dark:text-blue-300":D,"text-gray-500 dark:text-gray-400":!D})}),e.jsx("span",{className:"flex-1 truncate",children:y.label}),y.badge&&y.badge>0&&e.jsx("span",{className:R.cn("inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-full",{"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":D,"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200":!D}),children:y.badge>99?"99+":y.badge}),_&&e.jsx(F.Icon,{name:p?"ChevronDown":"ChevronRight",size:"sm",className:"flex-shrink-0 text-gray-400"})]}),_&&p&&e.jsx("div",{className:"border-l-2 border-gray-200 dark:border-gray-700 ml-6",children:y.children.map(U=>L(U,j+1))})]},y.id)},[A,w,M,t]);return f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:k,"aria-hidden":"true"}),e.jsxs("div",{className:R.cn("fixed inset-y-0 left-0 z-50 w-80 max-w-sm bg-white dark:bg-gray-900","transform transition-transform duration-300 ease-in-out","flex flex-col shadow-xl",{"bottom-0 top-auto rounded-t-xl":i},{"border-r-2 border-r-blue-200 dark:border-r-blue-800":t==="consultant","border-r-2 border-r-green-200 dark:border-r-green-800":t==="client","border-r-2 border-r-purple-200 dark:border-r-purple-800":t==="admin"},v),onTouchStart:I,onTouchMove:V,onTouchEnd:q,role:"navigation","aria-label":"Mobile navigation",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:R.cn("w-3 h-3 rounded-full",{"bg-blue-500":t==="consultant","bg-green-500":t==="client","bg-purple-500":t==="admin","bg-gray-500":t==="neutral"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:(a==null?void 0:a.name)||"Navigation"})]}),e.jsx("button",{onClick:()=>x==null?void 0:x(!1),className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Close navigation",children:e.jsx(F.Icon,{name:"X",size:"sm",className:"text-gray-500 dark:text-gray-400"})})]}),(u||l.length>0)&&e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[u&&e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:u.avatar?e.jsx("img",{src:u.avatar,alt:u.name,className:"w-8 h-8 rounded-full"}):e.jsx(F.Icon,{name:"User",size:"sm",className:"text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:u.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:u.role})]})]}),l.length>0&&e.jsxs("button",{onClick:()=>N(!E),className:"w-full flex items-center justify-between p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Switch Workspace"}),e.jsx(F.Icon,{name:E?"ChevronUp":"ChevronDown",size:"sm",className:"text-gray-400"})]}),E&&l.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:l.map(y=>e.jsxs("button",{onClick:()=>C(y),className:R.cn("w-full flex items-center gap-3 p-2 rounded-md text-left transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-blue-500",{"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":(a==null?void 0:a.id)===y.id,"text-gray-700 dark:text-gray-300":(a==null?void 0:a.id)!==y.id}),children:[e.jsx("div",{className:R.cn("w-2 h-2 rounded-full",{"bg-blue-500":y.type==="consultant","bg-green-500":y.type==="client","bg-purple-500":y.type==="admin"})}),e.jsx("span",{className:"text-sm font-medium truncate",children:y.name})]},y.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:s.map(y=>L(y))}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[t.charAt(0).toUpperCase()+t.slice(1)," Workspace"]}),h&&e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center mt-1",children:"Swipe left to close"})]})]})]}):null},Xe=(t="neutral")=>({consultant:{primary:"bg-blue-600 text-white",secondary:"bg-blue-50 text-blue-900 border-blue-200",accent:"text-blue-600",hover:"hover:bg-blue-50"},client:{primary:"bg-green-600 text-white",secondary:"bg-green-50 text-green-900 border-green-200",accent:"text-green-600",hover:"hover:bg-green-50"},admin:{primary:"bg-purple-600 text-white",secondary:"bg-purple-50 text-purple-900 border-purple-200",accent:"text-purple-600",hover:"hover:bg-purple-50"},expert:{primary:"bg-orange-600 text-white",secondary:"bg-orange-50 text-orange-900 border-orange-200",accent:"text-orange-600",hover:"hover:bg-orange-50"},"tool-creator":{primary:"bg-indigo-600 text-white",secondary:"bg-indigo-50 text-indigo-900 border-indigo-200",accent:"text-indigo-600",hover:"hover:bg-indigo-50"},founder:{primary:"bg-red-600 text-white",secondary:"bg-red-50 text-red-900 border-red-200",accent:"text-red-600",hover:"hover:bg-red-50"},neutral:{primary:"bg-gray-600 text-white",secondary:"bg-gray-50 text-gray-900 border-gray-200",accent:"text-gray-600",hover:"hover:bg-gray-50"}})[t],Bs=(t=[],s)=>s?t.includes(s)||t.includes("*"):!0,_s=(t,s=[],r="neutral")=>t.filter(n=>!(!Bs(s,n.permission)||n.workspaceContext&&!n.workspaceContext.includes(r)||n.hidden)),Is=(t,s,r)=>[...t].sort((n,l)=>{const a=ot(n,s),o=ot(l,s);if(a==null)return r==="asc"?1:-1;if(o==null)return r==="asc"?-1:1;if(typeof a=="string"&&typeof o=="string")return r==="asc"?a.localeCompare(o):o.localeCompare(a);if(typeof a=="number"&&typeof o=="number")return r==="asc"?a-o:o-a;if(a instanceof Date&&o instanceof Date)return r==="asc"?a.getTime()-o.getTime():o.getTime()-a.getTime();const u=String(a),i=String(o);return r==="asc"?u.localeCompare(i):i.localeCompare(u)}),mt=(t,s,r)=>{let n=[...t];if(r&&r.trim()){const l=r.toLowerCase();n=n.filter(a=>Object.values(a).some(o=>String(o).toLowerCase().includes(l)))}return Object.entries(s).forEach(([l,a])=>{a!=null&&a!==""&&(n=n.filter(o=>{const u=ot(o,l);return Array.isArray(a)?a.includes(u):typeof a=="string"?String(u).toLowerCase().includes(a.toLowerCase()):u===a}))}),n},ot=(t,s)=>s.split(".").reduce((r,n)=>r==null?void 0:r[n],t),xt=(t,s,r)=>{const n=(s-1)*r,l=n+r;return{data:t.slice(n,l),total:t.length,totalPages:Math.ceil(t.length/r)}},$e=(t,s)=>s?s(t):typeof t=="object"&&t!==null&&"id"in t?String(t.id):JSON.stringify(t),ft=(t,s,r="checkbox")=>r==="radio"?[s]:t.indexOf(s)>-1?t.filter(l=>l!==s):[...t,s],ht=(t,s,r,n,l=5)=>{const a=Math.floor(n/s),o=Math.min(t-1,Math.ceil((n+r)/s)),u=Math.max(0,a-l),i=Math.min(t-1,o+l);return{start:u,end:i,visibleStart:a,visibleEnd:o,totalHeight:t*s,offsetY:u*s}},Os=(t,s,r)=>s!==t?"none":r==="asc"?"ascending":"descending",bt=(t,s)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>t(...n),s)}},Ls=(t,s)=>t==null?"":s.render?String(t):t instanceof Date?t.toLocaleDateString():typeof t=="number"?t.toLocaleString():typeof t=="boolean"?t?"Yes":"No":String(t),Vs=({activities:t,loading:s=!1,context:r="neutral",permissions:n=[],grouped:l=!1,onActivityClick:a,onUserClick:o,realTimeUpdates:u=!1,onNewActivity:i,userFilters:h=[],typeFilters:f=[],onFilterChange:x,infiniteScroll:v=!1,onLoadMore:A,hasMore:T=!1,maxHeight:E,showAvatars:N=!0,showTimestamps:B=!0,className:$="",style:S})=>{const[b,m]=c.useState({}),w=Xe(r),M=c.useMemo(()=>{let j=t;return b.users&&b.users.length>0&&(j=j.filter(D=>b.users.includes(D.user.id))),b.types&&b.types.length>0&&(j=j.filter(D=>b.types.includes(D.type))),b.dateRange&&(j=j.filter(D=>{const p=new Date(D.timestamp);return p>=b.dateRange.start&&p<=b.dateRange.end})),b.unreadOnly&&(j=j.filter(D=>!D.read)),j},[t,b]),C=c.useMemo(()=>{if(!l)return{"All Activities":M};const j={};return M.forEach(D=>{const p=new Date(D.timestamp),_=new Date,U=new Date(_);U.setDate(U.getDate()-1);let z;p.toDateString()===_.toDateString()?z="Today":p.toDateString()===U.toDateString()?z="Yesterday":z=p.toLocaleDateString(),j[z]||(j[z]=[]),j[z].push(D)}),Object.keys(j).forEach(D=>{j[D].sort((p,_)=>new Date(_.timestamp).getTime()-new Date(p.timestamp).getTime())}),j},[M,l]),g=c.useCallback(j=>{m(j),x==null||x(j)},[x]),I=c.useCallback(j=>{a==null||a(j)},[a]),V=c.useCallback(j=>{o==null||o(j)},[o]);c.useEffect(()=>{if(u&&i)return()=>{}},[u,i]);const q=j=>{const D={create:"➕",update:"✏️",delete:"🗑️",comment:"💬",like:"👍",share:"🔗",view:"👁️",download:"⬇️",upload:"⬆️",login:"🔑",logout:"🚪",error:"❌",warning:"⚠️",success:"✅",info:"ℹ️"},p={create:"bg-green-500",update:"bg-blue-500",delete:"bg-red-500",comment:"bg-purple-500",like:"bg-pink-500",share:"bg-indigo-500",view:"bg-gray-500",download:"bg-teal-500",upload:"bg-orange-500",login:"bg-emerald-500",logout:"bg-slate-500",error:"bg-red-500",warning:"bg-yellow-500",success:"bg-green-500",info:"bg-blue-500"};return e.jsx("div",{className:`
          w-8 h-8 rounded-full flex items-center justify-center text-white text-sm
          ${p[j.type]||w.primary}
        `,children:D[j.type]||"•"})},k=j=>{const D=new Date(j),_=new Date().getTime()-D.getTime(),U=Math.floor(_/6e4),z=Math.floor(U/60),J=Math.floor(z/24);return U<1?"Just now":U<60?`${U}m ago`:z<24?`${z}h ago`:J<7?`${J}d ago`:D.toLocaleDateString()},L=j=>!j.workspaceContext||j.workspaceContext===r||n.includes("view_all_activities")?e.jsxs("div",{className:`
          flex gap-3 p-3 rounded-lg transition-colors
          ${a?"cursor-pointer hover:bg-gray-50":""}
          ${j.read?"":"bg-blue-50 border-l-4 border-blue-500"}
        `,onClick:()=>I(j),children:[e.jsx("div",{className:"flex-shrink-0",children:q(j)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:j.title}),j.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[B&&e.jsx("span",{children:k(j.timestamp)}),N&&j.user&&e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer hover:text-gray-700",onClick:p=>{p.stopPropagation(),V(j.user)},children:[j.user.avatar&&e.jsx(F.Avatar,{src:j.user.avatar,alt:j.user.name,size:"xs"}),e.jsx("span",{children:j.user.name}),j.user.role&&e.jsxs("span",{className:"text-gray-400",children:["(",j.user.role,")"]})]}),e.jsx("span",{className:"capitalize",children:j.type.replace(/_/g," ")}),j.target&&e.jsxs("span",{children:["→ ",j.target.name]})]})]}),!j.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]}),j.metadata&&Object.keys(j.metadata).length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(j.metadata).slice(0,4).map(([p,_])=>e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-600",children:[p.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase()),":"]}),e.jsx("span",{className:"ml-1 text-gray-900",children:typeof _=="object"?JSON.stringify(_):String(_)})]},p))})})]})]},j.id):null,y=(j,D)=>e.jsxs("div",{className:"mb-4",children:[l&&e.jsxs("div",{className:"flex items-center justify-between mb-3 px-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:j}),e.jsxs("span",{className:"text-xs text-gray-500",children:[D.length," activit",D.length!==1?"ies":"y"]})]}),e.jsx("div",{className:"space-y-1",children:D.map(p=>L(p))})]},j);return s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(F.Spinner,{size:"lg"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading activities..."})]}):M.length===0?e.jsx(F.EmptyState,{title:"No activities found",description:Object.keys(b).length>0?"No activities match your current filters.":"There are no activities to display.",actions:Object.keys(b).length>0?e.jsx(F.Button,{onClick:()=>g({}),children:"Clear filters"}):void 0}):e.jsxs("div",{className:`${$}`,style:S,children:[(h.length>0||f.length>0)&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"Filters"}),e.jsxs("div",{className:"space-y-2",children:[h.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-600 mb-1 block",children:"Users:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(j=>{var D;return e.jsx(F.Button,{variant:(D=b.users)!=null&&D.includes(j.id)?"primary":"outline",size:"sm",onClick:()=>{const p=b.users||[],U=p.includes(j.id)?p.filter(z=>z!==j.id):[...p,j.id];g({...b,users:U.length>0?U:void 0})},children:j.name},j.id)})})]}),f.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-600 mb-1 block",children:"Types:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:f.map(j=>{var D;return e.jsx(F.Button,{variant:(D=b.types)!=null&&D.includes(j)?"primary":"outline",size:"sm",onClick:()=>{const p=b.types||[],U=p.includes(j)?p.filter(z=>z!==j):[...p,j];g({...b,types:U.length>0?U:void 0})},children:j.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase())},j)})})]}),e.jsx("div",{children:e.jsx(F.Button,{variant:b.unreadOnly?"primary":"outline",size:"sm",onClick:()=>{g({...b,unreadOnly:!b.unreadOnly})},children:"Unread only"})})]}),Object.keys(b).length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:()=>g({}),children:"Clear all filters"})})]}),e.jsxs("div",{className:`
          bg-white border border-gray-200 rounded-lg
          ${E?"overflow-y-auto":""}
        `,style:{maxHeight:E},children:[Object.entries(C).map(([j,D])=>y(j,D)),v&&T&&e.jsx("div",{className:"p-4 text-center",children:e.jsx(F.Button,{variant:"outline",onClick:A,disabled:s,children:s?"Loading...":"Load more"})})]}),u&&e.jsxs("div",{className:"mt-3 flex items-center justify-center text-xs text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"}),"Live updates enabled"]})]})},Gs=({data:t,loading:s=!1,context:r="neutral",permissions:n=[],columns:l="auto",gap:a="md",itemHeight:o="auto",renderCard:u,minCardWidth:i=280,maxCardWidth:h=400,aspectRatio:f,pagination:x,filtering:v,selection:A,virtualScrolling:T,sortable:E=!1,sortOptions:N=[],onSort:B,draggable:$=!1,onDragStart:S,onDragEnd:b,masonry:m=!1,masonryBreakpoints:w,onItemClick:M,onItemDoubleClick:C,infiniteScroll:g=!1,onLoadMore:I,hasMore:V=!1,responsive:q=!0,className:k="",style:L})=>{const[y,j]=c.useState(""),[D,p]=c.useState((A==null?void 0:A.selectedKeys)||[]),[_,U]=c.useState((x==null?void 0:x.page)||1),[z,J]=c.useState((x==null?void 0:x.pageSize)||12),[Q,ne]=c.useState(0),[me,Ce]=c.useState(""),[te,xe]=c.useState("asc"),[fe,ve]=c.useState(null),X=c.useRef(null),H=c.useRef(null),je=c.useRef(null),Ae=Xe(r),Pe=c.useCallback(bt(G=>{j(G),U(1),v!=null&&v.onSearch&&v.onSearch(G)},300),[v]),de=c.useMemo(()=>{let G=[...t];if((v==null?void 0:v.enabled)!==!1&&y&&(G=mt(G,{},y)),me&&B?B(me,te):me&&G.sort((Z,he)=>{const Ne=Z[me],ze=he[me];return Ne<ze?te==="asc"?-1:1:Ne>ze?te==="asc"?1:-1:0}),(x==null?void 0:x.enabled)!==!1&&!(T!=null&&T.enabled)&&!g){const Z=xt(G,_,z);return{data:Z.data,total:Z.total,totalPages:Z.totalPages,filteredTotal:G.length}}return{data:G,total:G.length,totalPages:1,filteredTotal:G.length}},[t,y,me,te,_,z,v,x,T,g,B]),De=c.useMemo(()=>{if(typeof l=="number")return{columns:`repeat(${l}, 1fr)`,autoFit:!1};const G=a==="sm"?8:a==="md"?16:a==="lg"?24:typeof a=="number"?a:16;return m?{columns:"auto",autoFit:!0,gap:G,masonry:!0}:{columns:`repeat(auto-fit, minmax(${i}px, 1fr))`,autoFit:!0,gap:G}},[l,a,i,m]),Oe=c.useMemo(()=>{if(!(T!=null&&T.enabled)||!X.current||o==="auto")return null;const G=X.current.clientHeight,Z=typeof o=="number"?o:200;return ht(de.data.length,Z,G,Q,T.overscan)},[T,de.data.length,Q,o]),_e=c.useCallback(G=>{if(!(A!=null&&A.enabled))return;const Z=ft(D,G,A.type);if(p(Z),A.onSelectionChange){const he=de.data.filter(Ne=>Z.includes($e(Ne,A.getRowKey)));A.onSelectionChange(Z,he)}},[D,A,de.data]),Re=c.useCallback((G,Z)=>{M==null||M(G,Z)},[M]),et=c.useCallback((G,Z)=>{C==null||C(G,Z)},[C]),Te=c.useCallback(G=>{const Z=me===G&&te==="asc"?"desc":"asc";Ce(G),xe(Z)},[me,te]),tt=c.useCallback((G,Z)=>{$&&(ve({item:G,index:Z}),S==null||S(G,Z))},[$,S]),st=c.useCallback((G,Z,he)=>{$&&(ve(null),b==null||b(G,Z,he))},[$,b]),Le=c.useCallback(G=>{T!=null&&T.enabled&&(ne(G.currentTarget.scrollTop),T.onScroll&&T.onScroll(G.currentTarget.scrollTop))},[T]);c.useEffect(()=>{if(!g||!je.current||!V)return;const G=new IntersectionObserver(Z=>{Z[0].isIntersecting&&I&&I()},{threshold:.1});return G.observe(je.current),H.current=G,()=>{H.current&&H.current.disconnect()}},[g,V,I]);const Ve=typeof a=="string"?{sm:"gap-2",md:"gap-4",lg:"gap-6"}[a]:"",O=(G,Z)=>{const he=$e(G,A==null?void 0:A.getRowKey),Ne=D.includes(he),ze=(fe==null?void 0:fe.item)===G;return e.jsx("div",{className:`
          ${q?"w-full":""}
          ${M?"cursor-pointer":""}
          ${ze?"opacity-50":""}
          ${Ne?"ring-2 ring-blue-500":""}
          transition-all duration-150 hover:scale-[1.02]
        `,style:{height:o==="auto"?"auto":o,maxWidth:h,aspectRatio:f?`${f}`:void 0},draggable:$,onDragStart:()=>tt(G,Z),onDragEnd:()=>st(G,(fe==null?void 0:fe.index)||0,Z),onClick:()=>Re(G,Z),onDoubleClick:()=>et(G,Z),children:e.jsxs("div",{className:"relative h-full",children:[(A==null?void 0:A.enabled)&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("input",{type:A.type==="radio"?"radio":"checkbox",checked:Ne,onChange:()=>_e(he),className:"w-4 h-4",onClick:at=>at.stopPropagation()})}),u(G,Z,r)]})},he)},re=()=>{if(!Oe)return null;const{start:G,end:Z,totalHeight:he,offsetY:Ne}=Oe,ze=de.data.slice(G,Z+1);return e.jsx("div",{style:{height:he,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${Ne}px)`},children:e.jsx("div",{className:`grid ${Ve}`,style:{gridTemplateColumns:De.columns,gap:typeof a=="number"?`${a}px`:void 0},children:ze.map((at,nt)=>O(at,G+nt))})})})},ue=()=>e.jsx("div",{className:"columns-1 sm:columns-2 md:columns-3 lg:columns-4 xl:columns-5",style:{columnGap:typeof a=="number"?`${a}px`:void 0},children:de.data.map((G,Z)=>e.jsx("div",{className:"break-inside-avoid mb-4",children:O(G,Z)},$e(G,A==null?void 0:A.getRowKey)))}),we=()=>e.jsx("div",{className:`grid ${Ve}`,style:{gridTemplateColumns:De.columns,gap:typeof a=="number"?`${a}px`:void 0},children:de.data.map((G,Z)=>O(G,Z))});return s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(F.Spinner,{size:"lg"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):de.data.length===0?e.jsx(F.EmptyState,{title:"No items found",description:y?"No results found for your search.":"There are no items to display.",actions:y?e.jsx("button",{onClick:()=>j(""),className:`px-4 py-2 rounded-md ${Ae.primary} hover:opacity-90 transition-opacity`,children:"Clear search"}):void 0}):e.jsxs("div",{className:`${k}`,style:L,children:[((v==null?void 0:v.enabled)!==!1||E||D.length>0)&&e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[(v==null?void 0:v.enabled)!==!1&&e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx("input",{type:"text",placeholder:(v==null?void 0:v.searchPlaceholder)||"Search items...",onChange:G=>Pe(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),E&&N.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("select",{value:me,onChange:G=>Te(G.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Default"}),N.map(G=>e.jsx("option",{value:G.key,children:G.label},G.key))]}),me&&e.jsx("button",{onClick:()=>xe(te==="asc"?"desc":"asc"),className:"p-2 text-gray-500 hover:text-gray-700",title:`Sort ${te==="asc"?"descending":"ascending"}`,children:te==="asc"?"↑":"↓"})]})]}),D.length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[D.length," selected"]})]})}),e.jsxs("div",{ref:X,className:`
          ${T!=null&&T.enabled?"overflow-auto":""}
          ${q?"w-full":""}
        `,style:{maxHeight:T!=null&&T.enabled?600:void 0},onScroll:Le,children:[T!=null&&T.enabled?re():m?ue():we(),g&&V&&e.jsx("div",{ref:je,className:"flex justify-center py-4",children:e.jsx(F.Spinner,{size:"md"})})]}),(x==null?void 0:x.enabled)!==!1&&!(T!=null&&T.enabled)&&!g&&de.totalPages>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(_-1)*z+1," to ",Math.min(_*z,de.filteredTotal)," of ",de.filteredTotal," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(Math.max(1,_-1)),disabled:_===1,className:`
                px-3 py-1 text-sm border rounded-md
                ${_===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}
              `,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 px-3",children:["Page ",_," of ",de.totalPages]}),e.jsx("button",{onClick:()=>U(Math.min(de.totalPages,_+1)),disabled:_===de.totalPages,className:`
                px-3 py-1 text-sm border rounded-md
                ${_===de.totalPages?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}
              `,children:"Next"})]})]})]})},Ks=({data:t,loading:s=!1,context:r="neutral",permissions:n=[],columns:l="auto",gap:a="md",itemHeight:o="auto",cardComponent:u,pagination:i,filtering:h,selection:f,virtualScrolling:x,onItemClick:v,onItemDoubleClick:A,infiniteScroll:T=!1,onLoadMore:E,hasMore:N=!1,responsive:B=!0,className:$="",style:S})=>{const[b,m]=c.useState(""),[w,M]=c.useState((f==null?void 0:f.selectedKeys)||[]),[C,g]=c.useState((i==null?void 0:i.page)||1),[I,V]=c.useState((i==null?void 0:i.pageSize)||12),[q,k]=c.useState(0),L=c.useRef(null),y=c.useRef(null),j=c.useRef(null),D=Xe(r),p=c.useCallback(bt(X=>{m(X),g(1),h!=null&&h.onSearch&&h.onSearch(X)},300),[h]),_=c.useMemo(()=>{let X=[...t];if((h==null?void 0:h.enabled)!==!1&&b&&(X=mt(X,{},b)),(i==null?void 0:i.enabled)!==!1&&!(x!=null&&x.enabled)&&!T){const H=xt(X,C,I);return{data:H.data,total:H.total,totalPages:H.totalPages,filteredTotal:X.length}}return{data:X,total:X.length,totalPages:1,filteredTotal:X.length}},[t,b,C,I,h,i,x,T]),U=c.useMemo(()=>{if(!(x!=null&&x.enabled)||!L.current||o==="auto")return null;const X=L.current.clientHeight,H=typeof o=="number"?o:200;return ht(_.data.length,H,X,q,x.overscan)},[x,_.data.length,q,o]),z=c.useMemo(()=>{if(typeof l=="number")return{columns:`repeat(${l}, 1fr)`,autoFit:!1};const X=280,H=a==="sm"?8:a==="md"?16:a==="lg"?24:typeof a=="number"?a:16;return{columns:`repeat(auto-fit, minmax(${X}px, 1fr))`,autoFit:!0,gap:H}},[l,a]),J=c.useCallback(X=>{if(!(f!=null&&f.enabled))return;const H=ft(w,X,f.type);if(M(H),f.onSelectionChange){const je=_.data.filter(Ae=>H.includes($e(Ae,f.getRowKey)));f.onSelectionChange(H,je)}},[w,f,_.data]),Q=c.useCallback((X,H)=>{v==null||v(X,H)},[v]),ne=c.useCallback((X,H)=>{A==null||A(X,H)},[A]),me=c.useCallback(X=>{x!=null&&x.enabled&&(k(X.currentTarget.scrollTop),x.onScroll&&x.onScroll(X.currentTarget.scrollTop))},[x]);c.useEffect(()=>{if(!T||!j.current||!N)return;const X=new IntersectionObserver(H=>{H[0].isIntersecting&&E&&E()},{threshold:.1});return X.observe(j.current),y.current=X,()=>{y.current&&y.current.disconnect()}},[T,N,E]);const te=typeof a=="string"?{sm:"gap-2",md:"gap-4",lg:"gap-6"}[a]:"",xe=(X,H)=>{const je=$e(X,f==null?void 0:f.getRowKey),Ae=w.includes(je);return e.jsx("div",{className:`
          ${B?"w-full":""}
          ${v?"cursor-pointer":""}
          transition-transform duration-150 hover:scale-[1.02]
        `,onClick:()=>Q(X,H),onDoubleClick:()=>ne(X,H),style:{height:o==="auto"?"auto":o},children:e.jsx(u,{item:X,context:r,selected:Ae,onSelect:f!=null&&f.enabled?()=>J(je):void 0})},je)},fe=()=>{if(!U)return null;const{start:X,end:H,totalHeight:je,offsetY:Ae}=U,Pe=_.data.slice(X,H+1);return e.jsx("div",{style:{height:je,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${Ae}px)`},children:e.jsx("div",{className:`grid ${te}`,style:{gridTemplateColumns:z.columns,gap:typeof a=="number"?`${a}px`:void 0},children:Pe.map((de,De)=>xe(de,X+De))})})})},ve=()=>e.jsx("div",{className:`grid ${te}`,style:{gridTemplateColumns:z.columns,gap:typeof a=="number"?`${a}px`:void 0},children:_.data.map((X,H)=>xe(X,H))});return s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(F.Spinner,{size:"lg"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):_.data.length===0?e.jsx(F.EmptyState,{title:"No items found",description:b?"No results found for your search.":"There are no items to display.",actions:b?e.jsx("button",{onClick:()=>m(""),className:`px-4 py-2 rounded-md ${D.primary} hover:opacity-90 transition-opacity`,children:"Clear search"}):void 0}):e.jsxs("div",{className:`${$}`,style:S,children:[(h==null?void 0:h.enabled)!==!1&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx("input",{type:"text",placeholder:(h==null?void 0:h.searchPlaceholder)||"Search items...",onChange:X=>p(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),w.length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[w.length," selected"]})]})}),e.jsxs("div",{ref:L,className:`
          ${x!=null&&x.enabled?"overflow-auto":""}
          ${B?"w-full":""}
        `,style:{maxHeight:x!=null&&x.enabled?600:void 0},onScroll:me,children:[x!=null&&x.enabled?fe():ve(),T&&N&&e.jsx("div",{ref:j,className:"flex justify-center py-4",children:e.jsx(F.Spinner,{size:"md"})})]}),(i==null?void 0:i.enabled)!==!1&&!(x!=null&&x.enabled)&&!T&&_.totalPages>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(C-1)*I+1," to ",Math.min(C*I,_.filteredTotal)," of ",_.filteredTotal," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>g(Math.max(1,C-1)),disabled:C===1,className:`
                px-3 py-1 text-sm border rounded-md
                ${C===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}
              `,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 px-3",children:["Page ",C," of ",_.totalPages]}),e.jsx("button",{onClick:()=>g(Math.min(_.totalPages,C+1)),disabled:C===_.totalPages,className:`
                px-3 py-1 text-sm border rounded-md
                ${C===_.totalPages?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}
              `,children:"Next"})]})]})]})},Ws=({data:t,columns:s,loading:r=!1,context:n="neutral",permissions:l=[],pagination:a,sorting:o,filtering:u,selection:i,bulkActions:h=[],virtualScrolling:f,onRowClick:x,onRowDoubleClick:v,onCellClick:A,size:T="md",variant:E="default",responsive:N=!0,stickyHeader:B=!1,maxHeight:$,expandable:S,exportable:b=!1,onExport:m,ariaLabel:w,ariaLabelledBy:M,className:C="",style:g})=>{const[I,V]=c.useState(o==null?void 0:o.field),[q,k]=c.useState((o==null?void 0:o.direction)||"asc"),[L,y]=c.useState(""),[j,D]=c.useState({}),[p,_]=c.useState((i==null?void 0:i.selectedKeys)||[]),[U,z]=c.useState((S==null?void 0:S.expandedRowKeys)||[]),[J,Q]=c.useState((a==null?void 0:a.page)||1),[ne,me]=c.useState((a==null?void 0:a.pageSize)||10),[Ce,te]=c.useState(0),xe=c.useRef(null),fe=c.useRef(null),ve=Xe(n),X=c.useMemo(()=>_s(s,l,n),[s,l,n]),H=c.useMemo(()=>{let O=[...t];if((u==null?void 0:u.enabled)!==!1&&(O=mt(O,j,L)),I&&(o!=null&&o.onSort)?o.onSort(I,q):I&&(O=Is(O,I,q)),(a==null?void 0:a.enabled)!==!1&&!(f!=null&&f.enabled)){const re=xt(O,J,ne);return{data:re.data,total:re.total,totalPages:re.totalPages,filteredTotal:O.length}}return{data:O,total:O.length,totalPages:1,filteredTotal:O.length}},[t,j,L,I,q,J,ne,u,o,a,f]),je=c.useMemo(()=>{if(!(f!=null&&f.enabled)||!xe.current)return null;const O=xe.current.clientHeight,re=f.itemHeight||48;return ht(H.data.length,re,O,Ce,f.overscan)},[f,H.data.length,Ce]),Ae=c.useCallback(bt(O=>{y(O),Q(1),u!=null&&u.onSearch&&u.onSearch(O)},300),[u]),Pe=c.useCallback(O=>{const re=X.find(we=>String(we.key)===O);if(!(re!=null&&re.sortable))return;const ue=I===O&&q==="asc"?"desc":"asc";V(O),k(ue),o!=null&&o.onSort&&o.onSort(O,ue)},[X,I,q,o]),de=c.useCallback(O=>{if(!(i!=null&&i.enabled))return;const re=ft(p,O,i.type);if(_(re),i.onSelectionChange){const ue=H.data.filter(we=>re.includes($e(we,i.getRowKey)));i.onSelectionChange(re,ue)}},[p,i,H.data]),De=c.useCallback(()=>{if(!(i!=null&&i.enabled)||i.type==="radio")return;const O=H.data.map(ue=>$e(ue,i.getRowKey)),re=p.length===O.length?[]:O;if(_(re),i.onSelectionChange){const ue=re.length>0?H.data:[];i.onSelectionChange(re,ue)}},[p,i,H.data]),Oe=c.useCallback(O=>{const re=h.find(we=>we.id===O);if(!re)return;const ue=H.data.filter(we=>p.includes($e(we,i==null?void 0:i.getRowKey)));re.confirmMessage&&!window.confirm(re.confirmMessage)||re.onClick(ue)},[h,H.data,p,i]),_e=c.useCallback(()=>{if(!b||!m)return;const O=p.length>0?H.data.filter(re=>p.includes($e(re,i==null?void 0:i.getRowKey))):H.data;m(O)},[b,m,H.data,p,i]),Re=c.useCallback(O=>{f!=null&&f.enabled&&(te(O.currentTarget.scrollTop),f.onScroll&&f.onScroll(O.currentTarget.scrollTop))},[f]),et={sm:"text-xs",md:"text-sm",lg:"text-base"},Te={sm:"px-2 py-1",md:"px-3 py-2",lg:"px-4 py-3"},tt={default:"",striped:"[&>tbody>tr:nth-child(odd)]:bg-gray-50",bordered:"border border-gray-200"},st=()=>e.jsx("thead",{ref:fe,className:`bg-gray-50 ${B?"sticky top-0 z-10":""}`,children:e.jsxs("tr",{children:[(i==null?void 0:i.enabled)&&e.jsx("th",{className:`${Te[T]} w-12`,children:i.type==="checkbox"&&i.selectAll!==!1&&e.jsx(F.Checkbox,{checked:p.length===H.data.length&&H.data.length>0,onChange:De,"aria-label":"Select all rows"})}),X.map(O=>e.jsx("th",{className:`
              ${Te[T]}
              text-left font-medium text-gray-900
              ${O.sortable?"cursor-pointer hover:bg-gray-100":""}
              ${O.align==="center"?"text-center":""}
              ${O.align==="right"?"text-right":""}
            `,style:{width:O.width,minWidth:O.minWidth,maxWidth:O.maxWidth},onClick:()=>O.sortable&&Pe(String(O.key)),"aria-sort":Os(String(O.key),I,q),children:e.jsxs("div",{className:"flex items-center gap-1",children:[O.headerRender?O.headerRender():O.title,O.sortable&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-xs ${I===String(O.key)&&q==="asc"?"text-blue-600":"text-gray-400"}`,children:"▲"}),e.jsx("span",{className:`text-xs -mt-1 ${I===String(O.key)&&q==="desc"?"text-blue-600":"text-gray-400"}`,children:"▼"})]}),O.filterable&&e.jsx("span",{className:"text-xs text-gray-400",children:"🔍"})]})},String(O.key))),S&&e.jsx("th",{className:`${Te[T]} w-12`,children:e.jsx("span",{className:"sr-only",children:"Expand"})})]})}),Le=(O,re)=>{const ue=$e(O,i==null?void 0:i.getRowKey),we=p.includes(ue),G=U.includes(ue);return e.jsxs(c.Fragment,{children:[e.jsxs("tr",{className:`
            ${we?ve.secondary:"hover:bg-gray-50"}
            ${x?"cursor-pointer":""}
            transition-colors duration-150
          `,onClick:()=>x==null?void 0:x(O,re),onDoubleClick:()=>v==null?void 0:v(O,re),children:[(i==null?void 0:i.enabled)&&e.jsx("td",{className:Te[T],children:e.jsx(F.Checkbox,{checked:we,onChange:()=>de(ue),"aria-label":`Select row ${re+1}`})}),X.map(Z=>{const he=ot(O,String(Z.key));return e.jsx("td",{className:`
                  ${Te[T]}
                  ${Z.align==="center"?"text-center":""}
                  ${Z.align==="right"?"text-right":""}
                  ${A?"cursor-pointer":""}
                `,onClick:Ne=>{Ne.stopPropagation(),A==null||A(he,O,Z)},children:Z.render?Z.render(he,O,re):Ls(he,Z)},String(Z.key))}),S&&e.jsx("td",{className:Te[T],children:e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:Z=>{var Ne;Z.stopPropagation();const he=U.includes(ue)?U.filter(ze=>ze!==ue):[...U,ue];z(he),(Ne=S.onExpand)==null||Ne.call(S,!G,O)},"aria-label":G?"Collapse row":"Expand row",children:G?e.jsx("span",{className:"text-sm",children:"▲"}):e.jsx("span",{className:"text-sm",children:"▼"})})})]}),S&&G&&e.jsx("tr",{children:e.jsx("td",{colSpan:X.length+(i!=null&&i.enabled?1:0)+1,className:"p-0",children:e.jsx("div",{className:"bg-gray-50 p-4",children:S.expandedRowRender(O)})})})]},ue)},rt=()=>{if(!je)return null;const{start:O,end:re,totalHeight:ue,offsetY:we}=je,G=H.data.slice(O,re+1);return e.jsxs("tbody",{style:{height:ue},children:[e.jsx("tr",{style:{height:we},children:e.jsx("td",{colSpan:X.length+(i!=null&&i.enabled?1:0)+(S?1:0)})}),G.map((Z,he)=>Le(Z,O+he))]})},Ve=()=>e.jsx("tbody",{children:H.data.map((O,re)=>Le(O,re))});return r?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(F.Spinner,{size:"lg"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):H.data.length===0?e.jsx(F.EmptyState,{title:"No data available",description:L?"No results found for your search.":"There are no items to display.",actions:L?e.jsx(F.Button,{onClick:()=>y(""),children:"Clear search"}):void 0}):e.jsxs("div",{className:`${C}`,style:g,children:[((u==null?void 0:u.enabled)!==!1||h.length>0||b)&&e.jsxs("div",{className:"mb-4 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"flex flex-1 items-center gap-4",children:(u==null?void 0:u.searchable)!==!1&&e.jsx("div",{className:"flex-1 max-w-sm",children:e.jsx(F.Input,{name:"search",placeholder:(u==null?void 0:u.searchPlaceholder)||"Search...",onChange:O=>Ae(O.target.value),className:"w-full"})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[p.length>0&&h.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[p.length," selected"]}),h.map(O=>e.jsx(F.Button,{variant:O.variant||"secondary",size:"sm",onClick:()=>Oe(O.id),disabled:O.disabled,children:O.label},O.id))]}),b&&e.jsx(F.Button,{variant:"outline",size:"sm",onClick:_e,children:"Export"})]})]}),e.jsx("div",{ref:xe,className:`
          overflow-auto border border-gray-200 rounded-lg
          ${$?"":"max-h-96"}
        `,style:{maxHeight:$},onScroll:Re,children:e.jsxs("table",{className:`
            min-w-full divide-y divide-gray-200
            ${et[T]}
            ${tt[E]}
          `,"aria-label":w,"aria-labelledby":M,children:[st(),f!=null&&f.enabled?rt():Ve()]})}),(a==null?void 0:a.enabled)!==!1&&!(f!=null&&f.enabled)&&H.totalPages>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(J-1)*ne+1," to ",Math.min(J*ne,H.filteredTotal)," of ",H.filteredTotal," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F.Button,{variant:"outline",size:"sm",onClick:()=>Q(Math.max(1,J-1)),disabled:J===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",J," of ",H.totalPages]}),e.jsx(F.Button,{variant:"outline",size:"sm",onClick:()=>Q(Math.min(H.totalPages,J+1)),disabled:J===H.totalPages,children:"Next"})]})]})]})},Ys=({events:t,loading:s=!1,context:r="neutral",permissions:n=[],groupBy:l="date",filtering:a=[],onEventClick:o,onFilterChange:u,realTimeUpdates:i=!1,onNewEvent:h,responsive:f=!0,maxHeight:x,showTime:v=!0,showUser:A=!0,className:T="",style:E})=>{const[N,B]=c.useState(a),[$,S]=c.useState(new Set),b=Xe(r),m=c.useMemo(()=>N.length===0?t:t.filter(k=>N.every(L=>{var y;switch(L.type){case"user":return((y=k.user)==null?void 0:y.id)===L.value;case"type":return k.type===L.value;case"status":return k.status===L.value;case"date":const j=new Date(k.timestamp),D=new Date(L.value);return j.toDateString()===D.toDateString();default:return!0}})),[t,N]),w=c.useMemo(()=>{if(l==="none")return{"All Events":m};const k={};return m.forEach(L=>{var j;let y;switch(l){case"date":y=new Date(L.timestamp).toDateString();break;case"type":y=L.type;break;case"user":y=((j=L.user)==null?void 0:j.name)||"Unknown User";break;default:y="All Events"}k[y]||(k[y]=[]),k[y].push(L)}),Object.keys(k).forEach(L=>{k[L].sort((y,j)=>new Date(j.timestamp).getTime()-new Date(y.timestamp).getTime())}),k},[m,l]),M=c.useCallback(k=>{B(k),u==null||u(k)},[u]),C=c.useCallback(k=>{o==null||o(k)},[o]),g=c.useCallback(k=>{const L=new Set($);L.has(k)?L.delete(k):L.add(k),S(L)},[$]);c.useEffect(()=>{if(i&&h)return()=>{}},[i,h]);const I=k=>{if(k.icon)return e.jsx("div",{className:`
            w-8 h-8 rounded-full flex items-center justify-center text-white text-sm
            ${k.color?"":b.primary}
          `,style:{backgroundColor:k.color},children:k.icon});const L={pending:"bg-yellow-500",completed:"bg-green-500",failed:"bg-red-500",cancelled:"bg-gray-500"},y={pending:"⏳",completed:"✓",failed:"✗",cancelled:"⊘"};return e.jsx("div",{className:`
          w-8 h-8 rounded-full flex items-center justify-center text-white text-sm
          ${k.status?L[k.status]:b.primary}
        `,children:k.status?y[k.status]:"•"})},V=(k,L)=>!k.workspaceContext||k.workspaceContext===r||n.includes("view_all_events")?e.jsxs("div",{className:"relative flex gap-4 pb-6",children:[!L&&e.jsx("div",{className:"absolute left-4 top-8 w-0.5 h-full bg-gray-200"}),e.jsx("div",{className:"relative z-10",children:I(k)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:`
              bg-white border border-gray-200 rounded-lg p-4 shadow-sm
              ${o?"cursor-pointer hover:shadow-md transition-shadow":""}
            `,onClick:()=>C(k),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:k.title}),k.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description})]}),k.status&&e.jsx(F.Badge,{variant:k.status==="completed"?"success":k.status==="failed"?"error":k.status==="cancelled"?"secondary":"warning",size:"sm",children:k.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[v&&e.jsx("span",{children:new Date(k.timestamp).toLocaleString()}),A&&k.user&&e.jsxs("div",{className:"flex items-center gap-2",children:[k.user.avatar&&e.jsx(F.Avatar,{src:k.user.avatar,alt:k.user.name,size:"xs"}),e.jsx("span",{children:k.user.name})]}),e.jsx("span",{className:"capitalize",children:k.type})]}),k.metadata&&Object.keys(k.metadata).length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(k.metadata).map(([j,D])=>e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-600",children:[j.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase()),":"]}),e.jsx("span",{className:"ml-1 text-gray-900",children:typeof D=="object"?JSON.stringify(D):String(D)})]},j))})})]})})]},k.id):null,q=(k,L)=>{const y=$.has(k)||l==="none";return e.jsxs("div",{className:"mb-6",children:[l!=="none"&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[L.length," event",L.length!==1?"s":""]}),e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:()=>g(k),children:y?"▲":"▼"})]})]}),y&&e.jsx("div",{className:"space-y-0",children:L.map((j,D)=>V(j,D===L.length-1))})]},k)};return s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(F.Spinner,{size:"lg"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading timeline..."})]}):m.length===0?e.jsx(F.EmptyState,{title:"No events found",description:N.length>0?"No events match your current filters.":"There are no events to display.",actions:N.length>0?e.jsx(F.Button,{onClick:()=>M([]),children:"Clear filters"}):void 0}):e.jsxs("div",{className:`${T}`,style:E,children:[a.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Filters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(k=>e.jsx(F.Button,{variant:N.some(L=>L.type===k.type&&L.value===k.value)?"primary":"outline",size:"sm",onClick:()=>{const L=N.some(y=>y.type===k.type&&y.value===k.value);M(L?N.filter(y=>!(y.type===k.type&&y.value===k.value)):[...N,k])},children:k.label},`${k.type}-${k.value}`))}),N.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:()=>M([]),children:"Clear all filters"})})]}),e.jsx("div",{className:`
          ${f?"w-full":""}
          ${x?"overflow-y-auto":""}
        `,style:{maxHeight:x},children:Object.entries(w).map(([k,L])=>q(k,L))}),i&&e.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"}),"Live updates enabled"]})]})};function qs(t,s,r={},n){if(!t.validation)return null;for(const l of t.validation){if(l.workspaceContext&&n&&l.workspaceContext!==n)continue;const a=Hs(l,s,t,r);if(a)return a}return null}function Hs(t,s,r,n){switch(t.type){case"required":if(s==null||s==="")return t.message||`${r.label} is required`;break;case"minLength":if(typeof s=="string"&&s.length<t.value)return t.message||`${r.label} must be at least ${t.value} characters`;break;case"maxLength":if(typeof s=="string"&&s.length>t.value)return t.message||`${r.label} must be no more than ${t.value} characters`;break;case"pattern":if(typeof s=="string"&&!new RegExp(t.value).test(s))return t.message||`${r.label} format is invalid`;break;case"email":if(typeof s=="string"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return t.message||`${r.label} must be a valid email address`;break;case"url":try{new URL(s)}catch{return t.message||`${r.label} must be a valid URL`}break;case"number":if(isNaN(Number(s)))return t.message||`${r.label} must be a valid number`;break;case"custom":if(typeof t.value=="function"){const a=t.value(s,n,r);if(a!==!0)return typeof a=="string"?a:t.message}break}return null}function gt(t,s,r){const n={};for(const l of t){const a=qs(l,s[l.name],s,r);a&&(n[l.name]=a)}return n}function Dt(t,s){let r=!0,n=t.required||!1,l=!1,a=!1;if(!t.conditional)return{visible:r,required:n,disabled:l,readonly:a};for(const o of t.conditional){const u=s[o.field];if(Us(o,u))switch(o.action){case"show":r=!0;break;case"hide":r=!1;break;case"required":n=!0;break;case"disabled":l=!0;break;case"readonly":a=!0;break}}return{visible:r,required:n,disabled:l,readonly:a}}function Us(t,s){switch(t.operator){case"equals":return s===t.value;case"not_equals":return s!==t.value;case"contains":return typeof s=="string"&&s.includes(t.value);case"greater_than":return Number(s)>Number(t.value);case"less_than":return Number(s)<Number(t.value);case"in":return Array.isArray(t.value)&&t.value.includes(s);case"not_in":return Array.isArray(t.value)&&!t.value.includes(s);default:return!1}}function Js(t,s=[],r){return t.filter(n=>!(n.workspaceContext&&r&&n.workspaceContext!==r||n.permission&&!s.includes(n.permission)))}function Qe(t,s,r=[],n){return Js(t,r,n).filter(a=>{const{visible:o}=Dt(a,s);return o})}function Xs(t,s,r=[],n){const a=Qe(t,s,r,n).filter(u=>{const{required:i}=Dt(u,s);return i});if(a.length===0)return 100;const o=a.filter(u=>{const i=s[u.name];return i!=null&&i!==""});return Math.round(o.length/a.length*100)}function pt(t,s){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>t(...n),s)}}function it(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array)return t.map(s=>it(s));if(typeof t=="object"){const s={};for(const r in t)t.hasOwnProperty(r)&&(s[r]=it(t[r]));return s}return t}function Qs(t,s){return(s?`${s}-${t}`:t).replace(/[^a-zA-Z0-9-_]/g,"-").toLowerCase()}function Bt(t,s){return JSON.stringify(t)!==JSON.stringify(s)}function Zs({context:t="neutral",schema:s,initialData:r={},onSubmit:n,onChange:l,onValidationChange:a,template:o,workspaceId:u,autoSave:i=!1,autoSaveInterval:h=2e3,collaborative:f=!1,readonly:x=!1,permissions:v=[],className:A="",loading:T=!1,disabled:E=!1}){var j,D;const[N,B]=c.useState({data:{...r},errors:{},touched:{},isValid:!0,isSubmitting:!1,isDirty:!1,lastSaved:void 0}),[$,S]=c.useState("idle"),b=c.useRef({...r});c.useRef();const m=c.useMemo(()=>Qe(s.fields,N.data,v,t),[s.fields,N.data,v,t]),w=c.useMemo(()=>Xs(m,N.data,v,t),[m,N.data,v,t]),M=c.useCallback(p=>{const _=gt(m,p,t),U=Object.keys(_).length===0;return{errors:_,isValid:U}},[m,t]),C=c.useCallback((p,_)=>{x||E||B(U=>{const z={...U.data,[p]:_},{errors:J,isValid:Q}=M(z),ne=Bt(z,b.current),me={...U,data:z,errors:J,isValid:Q,isDirty:ne,touched:{...U.touched,[p]:!0}};return l==null||l(z),a==null||a(J),me})},[x,E,M,l,a]),g=c.useMemo(()=>pt(async p=>{if(!(!i||x))try{S("saving"),await new Promise(_=>setTimeout(_,500)),b.current=it(p),B(_=>({..._,lastSaved:new Date,isDirty:!1})),S("saved"),setTimeout(()=>S("idle"),2e3)}catch(_){console.error("Auto-save failed:",_),S("error"),setTimeout(()=>S("idle"),3e3)}},h),[i,h,x]);c.useEffect(()=>{i&&N.isDirty&&!N.isSubmitting&&g(N.data)},[i,N.isDirty,N.isSubmitting,N.data,g]);const I=c.useCallback(async p=>{if(p.preventDefault(),x||E||N.isSubmitting)return;const{errors:_,isValid:U}=M(N.data);if(B(z=>({...z,errors:_,isValid:U,isSubmitting:!0,touched:m.reduce((J,Q)=>({...J,[Q.name]:!0}),{})})),U&&n)try{await n(N.data),b.current=it(N.data),B(z=>({...z,isDirty:!1,lastSaved:new Date}))}catch(z){console.error("Form submission failed:",z)}B(z=>({...z,isSubmitting:!1}))},[x,E,N.isSubmitting,N.data,M,m,n]),V=c.useCallback(()=>{x||E||(B({data:{...r},errors:{},touched:{},isValid:!0,isSubmitting:!1,isDirty:!1,lastSaved:void 0}),b.current={...r})},[x,E,r]),q=c.useCallback(p=>{const _=Qs(p.name,u),U=N.data[p.name]||"",z=N.errors[p.name],J=N.touched[p.name];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:_,className:"block text-sm font-medium text-gray-700",children:[p.label,p.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{id:_,name:p.name,type:p.type||"text",placeholder:p.placeholder,value:U,disabled:E||x,onChange:Q=>C(p.name,Q.target.value),className:`
            w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
            ${J&&z?"border-red-500":"border-gray-300"}
            ${E||x?"bg-gray-50 cursor-not-allowed":"bg-white"}
          `,...p.props}),J&&z&&e.jsx("p",{className:"text-sm text-red-600",children:z})]},p.name)},[N.data,N.errors,N.touched,E,x,u,C]),k=()=>{if(!i)return null;const p={idle:"",saving:"Saving...",saved:"Saved",error:"Save failed"},_={idle:"text-gray-500",saving:"text-blue-500",saved:"text-green-500",error:"text-red-500"};return e.jsxs("div",{className:`text-sm ${_[$]} transition-colors duration-200`,children:[p[$],N.lastSaved&&$==="idle"&&e.jsxs("span",{className:"text-gray-400 ml-2",children:["Last saved: ",N.lastSaved.toLocaleTimeString()]})]})},L=()=>{var J,Q,ne;const p=((J=s.layout)==null?void 0:J.type)||"single-column",_=((Q=s.layout)==null?void 0:Q.spacing)||"normal",U={compact:"space-y-3",normal:"space-y-4",relaxed:"space-y-6"},z={"single-column":"grid grid-cols-1","two-column":"grid grid-cols-1 md:grid-cols-2 gap-x-6",grid:`grid grid-cols-1 md:grid-cols-${((ne=s.layout)==null?void 0:ne.columns)||2} gap-x-6`,tabs:"space-y-4",accordion:"space-y-2"};return e.jsx("div",{className:`${z[p]} ${U[_]}`,children:m.map(q)})},y=()=>`bg-white border border-gray-200 rounded-lg shadow-sm ${{consultant:"border-blue-200 focus-within:border-blue-500",client:"border-green-200 focus-within:border-green-500",admin:"border-purple-200 focus-within:border-purple-500",expert:"border-orange-200 focus-within:border-orange-500","tool-creator":"border-indigo-200 focus-within:border-indigo-500",founder:"border-red-200 focus-within:border-red-500",neutral:"border-gray-200 focus-within:border-gray-500"}[t]}`;return e.jsxs("div",{className:`form-builder ${A}`,children:[(((j=s.metadata)==null?void 0:j.title)||w<100||i)&&e.jsxs("div",{className:"mb-6",children:[((D=s.metadata)==null?void 0:D.title)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.metadata.title}),s.metadata.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:s.metadata.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Progress: ",w,"%"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})})]}),k()]})]}),e.jsxs("form",{onSubmit:I,className:y(),children:[e.jsx("div",{className:"p-6",children:T?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading form..."})]}):L()}),!x&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:N.isDirty&&e.jsx("span",{className:"text-sm text-orange-600",children:"You have unsaved changes"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F.Button,{type:"button",variant:"secondary",onClick:V,disabled:E||N.isSubmitting||!N.isDirty,children:"Reset"}),e.jsx(F.Button,{type:"submit",variant:"primary",disabled:E||N.isSubmitting||!N.isValid,isLoading:N.isSubmitting,children:N.isSubmitting?"Submitting...":"Submit"})]})]})})]}),f&&e.jsx("div",{className:"mt-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Collaborative editing enabled"})]})})]})}function Rs(t,s={}){const[r,n]=c.useState(t),[l,a]=c.useState(!1),[o,u]=c.useState(!1),[i,h]=c.useState(!1),[f,x]=c.useState(null),v=c.useMemo(()=>s.autoSave?pt($=>{h(!0),setTimeout(()=>{h(!1),x(new Date),u(!1)},500)},s.autoSaveInterval||2e3):null,[s.autoSave,s.autoSaveInterval]),A=c.useCallback($=>{if(!r)return;const S={...r,...$};n(S),u(!0),s.onTemplateChange&&s.onTemplateChange(S),v&&v(S)},[r,s,v]),T=c.useCallback(async()=>{if(!(!r||!o)){h(!0);try{s.onTemplateSave&&s.onTemplateSave(r),x(new Date),u(!1)}finally{h(!1)}}},[r,o,s]),E=c.useCallback(()=>{a(!0)},[]),N=c.useCallback(()=>{a(!1)},[]),B=c.useCallback(()=>{n(t),a(!1),u(!1)},[t]);return{currentTemplate:r,isEditing:l,isDirty:o,isSaving:i,lastSaved:f,updateTemplate:A,saveTemplate:T,startEditing:E,stopEditing:N,cancelEditing:B}}function er({metadata:t,onMetadataChange:s,context:r,disabled:n=!1}){var a;const l=(o,u)=>{s({...t,[o]:u})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:o=>l("name",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter template name",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:t.category,onChange:o=>l("category",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n,children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"onboarding",children:"Onboarding"}),e.jsx("option",{value:"survey",children:"Survey"}),e.jsx("option",{value:"application",children:"Application"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"registration",children:"Registration"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:t.description||"",onChange:o=>l("description",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this template is for",rows:3,disabled:n})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version"}),e.jsx("input",{type:"text",value:t.version,onChange:o=>l("version",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1.0.0",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),e.jsx("input",{type:"text",value:t.author||"",onChange:o=>l("author",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Template author",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time (minutes)"}),e.jsx("input",{type:"number",value:t.estimatedTime||"",onChange:o=>l("estimatedTime",parseInt(o.target.value)||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"5",min:"1",disabled:n})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx("input",{type:"text",value:((a=t.tags)==null?void 0:a.join(", "))||"",onChange:o=>l("tags",o.target.value.split(",").map(u=>u.trim()).filter(Boolean)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3",disabled:n}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isPublic||!1,onChange:o=>l("isPublic",o.target.checked),className:"mr-2",disabled:n}),e.jsx("span",{className:"text-sm text-gray-700",children:"Make template public"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isShared||!1,onChange:o=>l("isShared",o.target.checked),className:"mr-2",disabled:n}),e.jsx("span",{className:"text-sm text-gray-700",children:"Allow sharing"})]})]})]})}function _t({template:t,context:s}){const r=c.useMemo(()=>Qe(t.fields,{},[],s),[t.fields,s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.metadata.name}),t.metadata.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:t.metadata.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Category: ",t.metadata.category]}),e.jsxs("span",{children:["Version: ",t.metadata.version]}),t.metadata.estimatedTime&&e.jsxs("span",{children:["Est. time: ",t.metadata.estimatedTime," min"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Form Fields (",r.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map((n,l)=>e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-sm text-gray-900",children:[n.label,n.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:n.type})]}),n.placeholder&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Placeholder: ",n.placeholder]}),n.validation&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Validation: ",JSON.stringify(n.validation)]})]},n.name))})]}),t.metadata.tags&&t.metadata.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.metadata.tags.map((n,l)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:n},l))})]})]})}function tr({context:t="neutral",template:s,mode:r="view",onTemplateChange:n,onTemplateSave:l,onTemplateUse:a,onTemplateShare:o,onTemplateDelete:u,autoSave:i=!1,autoSaveInterval:h=2e3,permissions:f=[],className:x="",loading:v=!1,disabled:A=!1}){const T={type:"neutral"},E=t||(T==null?void 0:T.type),{currentTemplate:N,isEditing:B,isDirty:$,isSaving:S,lastSaved:b,updateTemplate:m,saveTemplate:w,startEditing:M,cancelEditing:C}=Rs(s||null,{autoSave:i,autoSaveInterval:h,onTemplateChange:n,onTemplateSave:l,context:E,permissions:f}),g=c.useCallback(L=>{m({metadata:L})},[m]),I=c.useCallback(()=>{N&&a&&a(N)},[N,a]),V=c.useCallback(()=>{N&&o&&o(N)},[N,o]),q=c.useCallback(()=>{N&&u&&u(N)},[N,u]),k=`
    bg-white rounded-lg shadow-sm border border-gray-200 p-6
    ${x}
  `;return v?e.jsx("div",{className:k,children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):N?e.jsxs("div",{className:k,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==="edit"||B?"Edit Template":"Template"}),b&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Last saved: ",b.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r==="view"&&!B&&e.jsxs(e.Fragment,{children:[e.jsx(F.Button,{variant:"secondary",onClick:I,disabled:A,children:"Use Template"}),N.metadata.isShared&&e.jsx(F.Button,{variant:"ghost",onClick:V,disabled:A,children:"Share"}),e.jsx(F.Button,{variant:"ghost",onClick:M,disabled:A,children:"Edit"})]}),(r==="edit"||B)&&e.jsxs(e.Fragment,{children:[e.jsx(F.Button,{variant:"ghost",onClick:C,disabled:A||S,children:"Cancel"}),e.jsx(F.Button,{variant:"primary",onClick:w,disabled:A||!$||S,isLoading:S,children:"Save"})]}),r==="view"&&!B&&u&&e.jsx(F.Button,{variant:"ghost",onClick:q,disabled:A,className:"text-red-600 hover:text-red-700",children:"Delete"})]})]}),r==="edit"||B?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Template Information"}),e.jsx(er,{metadata:N.metadata,onMetadataChange:g,context:E,disabled:A||S})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Form Preview"}),e.jsx(_t,{template:N,context:E})]})]}):e.jsx(_t,{template:N,context:E}),i&&S&&e.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"Saving..."})]}):e.jsx("div",{className:k,children:e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"No template selected"})})})}function sr(t,s={},r={}){const[n,l]=c.useState(0),[a,o]=c.useState({data:s,errors:{},touched:{},isValid:!1,isSubmitting:!1,isDirty:!1,currentStep:0}),u=t.length,i=n===0,h=n===u-1,f=t[n],x=c.useMemo(()=>f?Qe(f.fields,a.data,r.permissions,r.context):[],[f,a.data,r.permissions,r.context]),v=c.useCallback(()=>{if(!f)return!0;const g=gt(x,a.data,r.context);return o(I=>({...I,errors:{...I.errors,...g},isValid:Object.keys(g).length===0})),Object.keys(g).length===0},[f,x,a.data,r.context]),A=c.useMemo(()=>{if(h)return!1;const g=gt(x,a.data,r.context);return Object.keys(g).length===0},[h,x,a.data,r.context]),T=!i,E=c.useMemo(()=>r.autoSave?pt(g=>{o(I=>({...I,lastSaved:new Date}))},r.autoSaveInterval||2e3):null,[r.autoSave,r.autoSaveInterval]),N=c.useCallback((g,I)=>{o(V=>{const q={...V.data,[g]:I},k={...V,data:q,touched:{...V.touched,[g]:!0},isDirty:Bt(q,s)};return E&&E(q),k})},[E,s]),B=c.useCallback((g,I)=>{o(V=>({...V,errors:{...V.errors,[g]:I}}))},[]),$=c.useCallback(g=>{o(I=>{const V={...I.errors};return delete V[g],{...I,errors:V}})},[]),S=c.useCallback(()=>{if(!A)return;const g=Math.min(n+1,u-1);l(g),o(I=>({...I,currentStep:g})),r.onStepChange&&r.onStepChange(g,a.data)},[A,n,u,a.data,r]),b=c.useCallback(()=>{if(!T)return;const g=Math.max(n-1,0);l(g),o(I=>({...I,currentStep:g})),r.onStepChange&&r.onStepChange(g,a.data)},[T,n,a.data,r]),m=c.useCallback(g=>{g<0||g>=u||(l(g),o(I=>({...I,currentStep:g})),r.onStepChange&&r.onStepChange(g,a.data))},[u,a.data,r]),w=c.useCallback(()=>v(),[v]),M=c.useCallback(()=>{l(0),o({data:s,errors:{},touched:{},isValid:!1,isSubmitting:!1,isDirty:!1,currentStep:0})},[s]),C=c.useCallback(()=>{!h||!A||(o(g=>({...g,isSubmitting:!0})),r.onComplete&&r.onComplete(a.data))},[h,A,a.data,r]);return{formState:a,setValue:N,setError:B,clearError:$,validate:w,reset:M,submit:C,currentStep:n,totalSteps:u,canGoNext:A,canGoPrevious:T,nextStep:S,previousStep:b,goToStep:m,isFirstStep:i,isLastStep:h}}function rr({steps:t,currentStep:s,completedSteps:r,context:n}){const l=o=>r.includes(o)?"completed":o===s?"current":o<s?"completed":"upcoming",a=o=>{const u=l(o),i="flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium transition-colors";switch(u){case"completed":return`${i} bg-green-500 text-white`;case"current":return`${i} bg-blue-500 text-white ring-2 ring-blue-200`;case"upcoming":return`${i} bg-gray-200 text-gray-500`;default:return i}};return e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:t.map((o,u)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:a(u),children:r.includes(u)?e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("span",{children:u+1})}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.title}),o.estimatedTime&&e.jsxs("div",{className:"text-xs text-gray-500",children:[o.estimatedTime," min"]})]})]}),u<t.length-1&&e.jsx("div",{className:"flex-1 mx-4 h-0.5 bg-gray-200",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:u<s?"100%":"0%"}})})]},o.id))})})}function ar({step:t,formData:s,errors:r,onFieldChange:n,context:l,permissions:a}){const o=Qe(t.fields,s,a,l);return e.jsxs("div",{className:"space-y-6",children:[t.description&&e.jsx("div",{className:"text-gray-600 mb-6",children:t.description}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.map(u=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[u.label,u.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:u.type||"text",value:s[u.name]||"",onChange:i=>n(u.name,i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:u.placeholder,disabled:u.disabled||!1}),r[u.name]&&e.jsx("p",{className:"text-sm text-red-600",children:r[u.name]})]},u.name))})]})}function nr({context:t="neutral",steps:s,initialData:r={},currentStep:n,onStepChange:l,onComplete:a,onCancel:o,template:u,workspaceId:i,autoSave:h=!1,autoSaveInterval:f=2e3,showProgress:x=!0,allowStepSkip:v=!1,allowStepBack:A=!0,permissions:T=[],className:E="",loading:N=!1,disabled:B=!1}){const $={type:"neutral"},S=t||($==null?void 0:$.type),b=n!==void 0,{formState:m,setValue:w,clearError:M,validate:C,submit:g,currentStep:I,totalSteps:V,canGoNext:q,canGoPrevious:k,nextStep:L,previousStep:y,isLastStep:j}=sr(s,r,{autoSave:h,autoSaveInterval:f,onStepChange:l,onComplete:a,context:S,permissions:T}),D=b?n:I,p=b?()=>l==null?void 0:l(D+1,m.data):L,_=b?()=>l==null?void 0:l(D-1,m.data):y,[U,z]=c.useState([]);c.useEffect(()=>{D>0&&!U.includes(D-1)&&z(xe=>[...xe,D-1])},[D,U]);const J=s[D];if(!J)return e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-red-600",children:"Invalid step configuration"})});const Q=Math.round((D+1)/V*100),ne=(xe,fe)=>{w(xe,fe),M(xe)},me=()=>{C()&&p()},Ce=()=>{C()&&g()},te=`
    bg-white rounded-lg shadow-sm border border-gray-200 p-6
    ${E}
  `;return N?e.jsx("div",{className:te,children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs("div",{className:te,children:[x&&e.jsx(rr,{steps:s,currentStep:D,completedSteps:U,context:S}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:J.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Step ",D+1," of ",V," (",Q,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Q}%`}})})]}),e.jsx(ar,{step:J,formData:m.data,errors:m.errors,onFieldChange:ne,context:S,permissions:T}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[A&&k&&e.jsx(F.Button,{variant:"secondary",onClick:_,disabled:B||m.isSubmitting,children:"Previous"}),o&&e.jsx(F.Button,{variant:"ghost",onClick:o,disabled:B||m.isSubmitting,children:"Cancel"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[v&&!j&&e.jsx(F.Button,{variant:"ghost",onClick:p,disabled:B||m.isSubmitting,children:"Skip"}),j?e.jsx(F.Button,{variant:"primary",onClick:Ce,disabled:B||!q||m.isSubmitting,isLoading:m.isSubmitting,children:"Complete"}):e.jsx(F.Button,{variant:"primary",onClick:me,disabled:B||!q||m.isSubmitting,children:"Next"})]})]}),h&&m.lastSaved&&e.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:["Last saved: ",m.lastSaved.toLocaleTimeString()]})]})}function It(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(r=It(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function lr(){for(var t,s,r=0,n="",l=arguments.length;r<l;r++)(t=arguments[r])&&(s=It(t))&&(n&&(n+=" "),n+=s);return n}const yt="-",or=t=>{const s=cr(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const u=o.split(yt);return u[0]===""&&u.length!==1&&u.shift(),Ot(u,s)||ir(o)},getConflictingClassGroupIds:(o,u)=>{const i=r[o]||[];return u&&n[o]?[...i,...n[o]]:i}}},Ot=(t,s)=>{var o;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),l=n?Ot(t.slice(1),n):void 0;if(l)return l;if(s.validators.length===0)return;const a=t.join(yt);return(o=s.validators.find(({validator:u})=>u(a)))==null?void 0:o.classGroupId},Lt=/^\[(.+)\]$/,ir=t=>{if(Lt.test(t)){const s=Lt.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},cr=t=>{const{theme:s,classGroups:r}=t,n={nextPart:new Map,validators:[]};for(const l in r)vt(r[l],n,l,s);return n},vt=(t,s,r,n)=>{t.forEach(l=>{if(typeof l=="string"){const a=l===""?s:Vt(s,l);a.classGroupId=r;return}if(typeof l=="function"){if(dr(l)){vt(l(n),s,r,n);return}s.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([a,o])=>{vt(o,Vt(s,a),r,n)})})},Vt=(t,s)=>{let r=t;return s.split(yt).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},dr=t=>t.isThemeGetter,ur=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const l=(a,o)=>{r.set(a,o),s++,s>t&&(s=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return l(a,o),o},set(a,o){r.has(a)?r.set(a,o):l(a,o)}}},jt="!",wt=":",mr=wt.length,xr=t=>{const{prefix:s,experimentalParseClassName:r}=t;let n=l=>{const a=[];let o=0,u=0,i=0,h;for(let T=0;T<l.length;T++){let E=l[T];if(o===0&&u===0){if(E===wt){a.push(l.slice(i,T)),i=T+mr;continue}if(E==="/"){h=T;continue}}E==="["?o++:E==="]"?o--:E==="("?u++:E===")"&&u--}const f=a.length===0?l:l.substring(i),x=fr(f),v=x!==f,A=h&&h>i?h-i:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:A}};if(s){const l=s+wt,a=n;n=o=>o.startsWith(l)?a(o.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(r){const l=n;n=a=>r({className:a,parseClassName:l})}return n},fr=t=>t.endsWith(jt)?t.substring(0,t.length-1):t.startsWith(jt)?t.substring(1):t,hr=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const l=[];let a=[];return n.forEach(o=>{o[0]==="["||s[o]?(l.push(...a.sort(),o),a=[]):a.push(o)}),l.push(...a.sort()),l}},br=t=>({cache:ur(t.cacheSize),parseClassName:xr(t),sortModifiers:hr(t),...or(t)}),gr=/\s+/,pr=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:l,sortModifiers:a}=s,o=[],u=t.trim().split(gr);let i="";for(let h=u.length-1;h>=0;h-=1){const f=u[h],{isExternal:x,modifiers:v,hasImportantModifier:A,baseClassName:T,maybePostfixModifierPosition:E}=r(f);if(x){i=f+(i.length>0?" "+i:i);continue}let N=!!E,B=n(N?T.substring(0,E):T);if(!B){if(!N){i=f+(i.length>0?" "+i:i);continue}if(B=n(T),!B){i=f+(i.length>0?" "+i:i);continue}N=!1}const $=a(v).join(":"),S=A?$+jt:$,b=S+B;if(o.includes(b))continue;o.push(b);const m=l(B,N);for(let w=0;w<m.length;++w){const M=m[w];o.push(S+M)}i=f+(i.length>0?" "+i:i)}return i};function yr(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=Gt(s))&&(n&&(n+=" "),n+=r);return n}const Gt=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=Gt(t[n]))&&(r&&(r+=" "),r+=s);return r};function vr(t,...s){let r,n,l,a=o;function o(i){const h=s.reduce((f,x)=>x(f),t());return r=br(h),n=r.cache.get,l=r.cache.set,a=u,u(i)}function u(i){const h=n(i);if(h)return h;const f=pr(i,r);return l(i,f),f}return function(){return a(yr.apply(null,arguments))}}const pe=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},Kt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Wt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,jr=/^\d+\/\d+$/,wr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Cr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ke=t=>jr.test(t),se=t=>!!t&&!Number.isNaN(Number(t)),Be=t=>!!t&&Number.isInteger(Number(t)),Nt=t=>t.endsWith("%")&&se(t.slice(0,-1)),Me=t=>wr.test(t),Er=()=>!0,Tr=t=>Nr.test(t)&&!kr.test(t),Yt=()=>!1,Fr=t=>Cr.test(t),Ar=t=>Sr.test(t),$r=t=>!W(t)&&!Y(t),Pr=t=>We(t,Xt,Yt),W=t=>Kt.test(t),Ie=t=>We(t,Qt,Tr),kt=t=>We(t,_r,se),qt=t=>We(t,Ut,Yt),zr=t=>We(t,Jt,Ar),ct=t=>We(t,Zt,Fr),Y=t=>Wt.test(t),Ze=t=>Ye(t,Qt),Mr=t=>Ye(t,Ir),Ht=t=>Ye(t,Ut),Dr=t=>Ye(t,Xt),Br=t=>Ye(t,Jt),dt=t=>Ye(t,Zt,!0),We=(t,s,r)=>{const n=Kt.exec(t);return n?n[1]?s(n[1]):r(n[2]):!1},Ye=(t,s,r=!1)=>{const n=Wt.exec(t);return n?n[1]?s(n[1]):r:!1},Ut=t=>t==="position"||t==="percentage",Jt=t=>t==="image"||t==="url",Xt=t=>t==="length"||t==="size"||t==="bg-size",Qt=t=>t==="length",_r=t=>t==="number",Ir=t=>t==="family-name",Zt=t=>t==="shadow",Or=vr(()=>{const t=pe("color"),s=pe("font"),r=pe("text"),n=pe("font-weight"),l=pe("tracking"),a=pe("leading"),o=pe("breakpoint"),u=pe("container"),i=pe("spacing"),h=pe("radius"),f=pe("shadow"),x=pe("inset-shadow"),v=pe("text-shadow"),A=pe("drop-shadow"),T=pe("blur"),E=pe("perspective"),N=pe("aspect"),B=pe("ease"),$=pe("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],m=()=>[...b(),Y,W],w=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],C=()=>[Y,W,i],g=()=>[Ke,"full","auto",...C()],I=()=>[Be,"none","subgrid",Y,W],V=()=>["auto",{span:["full",Be,Y,W]},Be,Y,W],q=()=>[Be,"auto",Y,W],k=()=>["auto","min","max","fr",Y,W],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],y=()=>["start","end","center","stretch","center-safe","end-safe"],j=()=>["auto",...C()],D=()=>[Ke,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],p=()=>[t,Y,W],_=()=>[...b(),Ht,qt,{position:[Y,W]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",Dr,Pr,{size:[Y,W]}],J=()=>[Nt,Ze,Ie],Q=()=>["","none","full",h,Y,W],ne=()=>["",se,Ze,Ie],me=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[se,Nt,Ht,qt],xe=()=>["","none",T,Y,W],fe=()=>["none",se,Y,W],ve=()=>["none",se,Y,W],X=()=>[se,Y,W],H=()=>[Ke,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Me],breakpoint:[Me],color:[Er],container:[Me],"drop-shadow":[Me],ease:["in","out","in-out"],font:[$r],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Me],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Me],shadow:[Me],spacing:["px",se],text:[Me],"text-shadow":[Me],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ke,W,Y,N]}],container:["container"],columns:[{columns:[se,W,Y,u]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:m()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:g()}],"inset-x":[{"inset-x":g()}],"inset-y":[{"inset-y":g()}],start:[{start:g()}],end:[{end:g()}],top:[{top:g()}],right:[{right:g()}],bottom:[{bottom:g()}],left:[{left:g()}],visibility:["visible","invisible","collapse"],z:[{z:[Be,"auto",Y,W]}],basis:[{basis:[Ke,"full","auto",u,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[se,Ke,"auto","initial","none",W]}],grow:[{grow:["",se,Y,W]}],shrink:[{shrink:["",se,Y,W]}],order:[{order:[Be,"first","last","none",Y,W]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...y(),"normal"]}],"justify-self":[{"justify-self":["auto",...y()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...y(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...y(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...y(),"baseline"]}],"place-self":[{"place-self":["auto",...y()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[u,"screen",...D()]}],"min-w":[{"min-w":[u,"screen","none",...D()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[o]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",r,Ze,Ie]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Y,kt]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Nt,W]}],"font-family":[{font:[Mr,W,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Y,W]}],"line-clamp":[{"line-clamp":[se,"none",Y,kt]}],leading:[{leading:[a,...C()]}],"list-image":[{"list-image":["none",Y,W]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Y,W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:p()}],"text-color":[{text:p()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[se,"from-font","auto",Y,Ie]}],"text-decoration-color":[{decoration:p()}],"underline-offset":[{"underline-offset":[se,"auto",Y,W]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y,W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y,W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Be,Y,W],radial:["",Y,W],conic:[Be,Y,W]},Br,zr]}],"bg-color":[{bg:p()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:p()}],"gradient-via":[{via:p()}],"gradient-to":[{to:p()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:p()}],"border-color-x":[{"border-x":p()}],"border-color-y":[{"border-y":p()}],"border-color-s":[{"border-s":p()}],"border-color-e":[{"border-e":p()}],"border-color-t":[{"border-t":p()}],"border-color-r":[{"border-r":p()}],"border-color-b":[{"border-b":p()}],"border-color-l":[{"border-l":p()}],"divide-color":[{divide:p()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[se,Y,W]}],"outline-w":[{outline:["",se,Ze,Ie]}],"outline-color":[{outline:p()}],shadow:[{shadow:["","none",f,dt,ct]}],"shadow-color":[{shadow:p()}],"inset-shadow":[{"inset-shadow":["none",x,dt,ct]}],"inset-shadow-color":[{"inset-shadow":p()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:p()}],"ring-offset-w":[{"ring-offset":[se,Ie]}],"ring-offset-color":[{"ring-offset":p()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":p()}],"text-shadow":[{"text-shadow":["none",v,dt,ct]}],"text-shadow-color":[{"text-shadow":p()}],opacity:[{opacity:[se,Y,W]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[se]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":p()}],"mask-image-linear-to-color":[{"mask-linear-to":p()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":p()}],"mask-image-t-to-color":[{"mask-t-to":p()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":p()}],"mask-image-r-to-color":[{"mask-r-to":p()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":p()}],"mask-image-b-to-color":[{"mask-b-to":p()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":p()}],"mask-image-l-to-color":[{"mask-l-to":p()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":p()}],"mask-image-x-to-color":[{"mask-x-to":p()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":p()}],"mask-image-y-to-color":[{"mask-y-to":p()}],"mask-image-radial":[{"mask-radial":[Y,W]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":p()}],"mask-image-radial-to-color":[{"mask-radial-to":p()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[se]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":p()}],"mask-image-conic-to-color":[{"mask-conic-to":p()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Y,W]}],filter:[{filter:["","none",Y,W]}],blur:[{blur:xe()}],brightness:[{brightness:[se,Y,W]}],contrast:[{contrast:[se,Y,W]}],"drop-shadow":[{"drop-shadow":["","none",A,dt,ct]}],"drop-shadow-color":[{"drop-shadow":p()}],grayscale:[{grayscale:["",se,Y,W]}],"hue-rotate":[{"hue-rotate":[se,Y,W]}],invert:[{invert:["",se,Y,W]}],saturate:[{saturate:[se,Y,W]}],sepia:[{sepia:["",se,Y,W]}],"backdrop-filter":[{"backdrop-filter":["","none",Y,W]}],"backdrop-blur":[{"backdrop-blur":xe()}],"backdrop-brightness":[{"backdrop-brightness":[se,Y,W]}],"backdrop-contrast":[{"backdrop-contrast":[se,Y,W]}],"backdrop-grayscale":[{"backdrop-grayscale":["",se,Y,W]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[se,Y,W]}],"backdrop-invert":[{"backdrop-invert":["",se,Y,W]}],"backdrop-opacity":[{"backdrop-opacity":[se,Y,W]}],"backdrop-saturate":[{"backdrop-saturate":[se,Y,W]}],"backdrop-sepia":[{"backdrop-sepia":["",se,Y,W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Y,W]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[se,"initial",Y,W]}],ease:[{ease:["linear","initial",B,Y,W]}],delay:[{delay:[se,Y,W]}],animate:[{animate:["none",$,Y,W]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,Y,W]}],"perspective-origin":[{"perspective-origin":m()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:X()}],"skew-x":[{"skew-x":X()}],"skew-y":[{"skew-y":X()}],transform:[{transform:[Y,W,"","none","gpu","cpu"]}],"transform-origin":[{origin:m()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:H()}],"translate-x":[{"translate-x":H()}],"translate-y":[{"translate-y":H()}],"translate-z":[{"translate-z":H()}],"translate-none":["translate-none"],accent:[{accent:p()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:p()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y,W]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y,W]}],fill:[{fill:["none",...p()]}],"stroke-w":[{stroke:[se,Ze,Ie,kt]}],stroke:[{stroke:["none",...p()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function ye(...t){return Or(lr(t))}const Lr=()=>({socket:{on:(t,s)=>{},off:t=>{},emit:(t,s)=>{}}}),Rt=t=>{const r=new Date().getTime()-t.getTime(),n=Math.floor(r/6e4),l=Math.floor(r/36e5),a=Math.floor(r/864e5);return n<1?"Just now":n<60?`${n}m ago`:l<24?`${l}h ago`:a<7?`${a}d ago`:t.toLocaleDateString()},Vr=({chats:t,selectedChat:s,onChatSelect:r,context:n="consultant",currentUser:l})=>{const[a,o]=c.useState(""),u=c.useMemo(()=>a?t.filter(h=>{var f;return((f=h.name)==null?void 0:f.toLowerCase().includes(a.toLowerCase()))||h.participants.some(x=>x.name.toLowerCase().includes(a.toLowerCase()))}):t,[t,a]),i=h=>({consultant:"border-l-blue-500 bg-blue-50",client:"border-l-green-500 bg-green-50",admin:"border-l-purple-500 bg-purple-50",expert:"border-l-orange-500 bg-orange-50",tool_creator:"border-l-indigo-500 bg-indigo-50",founder:"border-l-red-500 bg-red-50",neutral:"border-l-gray-500 bg-gray-50"})[h]||"border-l-gray-500 bg-gray-50";return e.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(F.Icon,{name:"Search",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(F.Input,{name:"search",placeholder:"Search conversations...",value:a,onChange:h=>o(h.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:u.length===0?e.jsx(F.EmptyState,{title:a?"No conversations found":"No conversations yet",description:"Start a new conversation to get started"}):e.jsx("div",{className:"space-y-1 p-2",children:u.map(h=>{var f,x,v,A,T;return e.jsxs("div",{onClick:()=>r(h),className:ye("flex items-center p-3 rounded-lg cursor-pointer transition-colors border-l-4",(s==null?void 0:s.id)===h.id?i(n):"border-l-transparent hover:bg-gray-50"),children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:h.type==="direct"?e.jsx(F.Avatar,{src:((f=h.participants.find(E=>E.id!==l.id))==null?void 0:f.avatar)||((x=h.participants[0])==null?void 0:x.avatar),alt:((v=h.participants.find(E=>E.id!==l.id))==null?void 0:v.name)||((A=h.participants[0])==null?void 0:A.name),size:"md"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(F.Icon,{name:"Users",className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:h.name||h.participants.filter(E=>E.id!==l.id).map(E=>E.name).join(", ")}),h.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:Rt(h.lastMessage.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:((T=h.lastMessage)==null?void 0:T.content)||"No messages yet"}),h.unreadCount>0&&e.jsx(F.Badge,{variant:"primary",size:"sm",children:h.unreadCount})]})]})]},h.id)})})})]})},Gr=({chat:t,context:s="consultant",currentUser:r})=>{var l,a,o,u;const n=i=>({consultant:"text-blue-600",client:"text-green-600",admin:"text-purple-600",expert:"text-orange-600",tool_creator:"text-indigo-600",founder:"text-red-600",neutral:"text-gray-600"})[i]||"text-gray-600";return e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:t.type==="direct"?e.jsx(F.Avatar,{src:((l=t.participants.find(i=>i.id!==r.id))==null?void 0:l.avatar)||((a=t.participants[0])==null?void 0:a.avatar),alt:((o=t.participants.find(i=>i.id!==r.id))==null?void 0:o.name)||((u=t.participants[0])==null?void 0:u.name),size:"md"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(F.Icon,{name:"Users",className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.name||t.participants.filter(i=>i.id!==r.id).map(i=>i.name).join(", ")}),e.jsxs("p",{className:ye("text-sm",n(s)),children:[t.participants.length," participant",t.participants.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Button,{variant:"ghost",size:"sm",children:e.jsx(F.Icon,{name:"Phone",className:"w-4 h-4"})}),e.jsx(F.Button,{variant:"ghost",size:"sm",children:e.jsx(F.Icon,{name:"Video",className:"w-4 h-4"})}),e.jsx(F.Button,{variant:"ghost",size:"sm",children:e.jsx(F.Icon,{name:"Info",className:"w-4 h-4"})})]})]})},Kr=({messages:t,currentUser:s,context:r="consultant",onMessageReply:n,onMessageReact:l,loading:a})=>{const o=u=>({consultant:"bg-blue-500",client:"bg-green-500",admin:"bg-purple-500",expert:"bg-orange-500",tool_creator:"bg-indigo-500",founder:"bg-red-500",neutral:"bg-gray-500"})[u]||"bg-gray-500";return a?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(F.Spinner,{size:"lg"})}):t.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(F.EmptyState,{title:"No messages yet",description:"Start the conversation!"})}):e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:t.map(u=>{const i=u.sender.id===s.id;return e.jsx("div",{className:ye("flex",i?"justify-end":"justify-start"),children:e.jsxs("div",{className:ye("flex max-w-xs lg:max-w-md",i?"flex-row-reverse":"flex-row"),children:[!i&&e.jsx(F.Avatar,{src:u.sender.avatar,alt:u.sender.name,size:"sm",className:"flex-shrink-0 mr-2"}),e.jsxs("div",{className:ye("flex flex-col",i?"items-end":"items-start"),children:[!i&&e.jsx("span",{className:"text-xs text-gray-500 mb-1",children:u.sender.name}),e.jsxs("div",{className:ye("px-4 py-2 rounded-lg",i?ye("text-white",o(r)):"bg-gray-100 text-gray-900"),children:[e.jsx("p",{className:"text-sm",children:u.content}),u.attachments&&u.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:u.attachments.map(h=>e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsx(F.Icon,{name:"Paperclip",className:"w-3 h-3"}),e.jsx("span",{children:h.name})]},h.id))})]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:Rt(u.timestamp)}),u.status==="read"&&i&&e.jsx(F.Icon,{name:"CheckCheck",className:"w-3 h-3 text-blue-500"}),u.reactions&&u.reactions.length>0&&e.jsx("div",{className:"flex space-x-1",children:u.reactions.map((h,f)=>e.jsxs("span",{className:"text-xs bg-gray-200 px-1 rounded",children:[h.emoji," ",h.users.length]},f))})]})]})]})},u.id)})})},Wr=({onSend:t,onTyping:s,context:r="consultant",placeholder:n="Type a message...",disabled:l})=>{const[a,o]=c.useState(""),[u,i]=c.useState([]),h=()=>{(a.trim()||u.length>0)&&(t(a.trim(),u),o(""),i([]))},f=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),h())},x=v=>({consultant:"text-blue-600 hover:text-blue-700",client:"text-green-600 hover:text-green-700",admin:"text-purple-600 hover:text-purple-700",expert:"text-orange-600 hover:text-orange-700",tool_creator:"text-indigo-600 hover:text-indigo-700",founder:"text-red-600 hover:text-red-700",neutral:"text-gray-600 hover:text-gray-700"})[v]||"text-gray-600 hover:text-gray-700";return e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:a,onChange:v=>{o(v.target.value),s==null||s()},onKeyPress:f,placeholder:n,disabled:l,className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),u.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:u.map((v,A)=>e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx(F.Icon,{name:"Paperclip",className:"w-3 h-3"}),e.jsx("span",{children:v.name}),e.jsx("button",{onClick:()=>i(T=>T.filter((E,N)=>N!==A)),className:"text-gray-500 hover:text-red-500",children:e.jsx(F.Icon,{name:"X",className:"w-3 h-3"})})]},A))})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"file",multiple:!0,onChange:v=>{v.target.files&&i(A=>[...A,...Array.from(v.target.files)])},className:"hidden",id:"file-upload"}),e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:()=>{var v;return(v=document.getElementById("file-upload"))==null?void 0:v.click()},disabled:l,children:e.jsx(F.Icon,{name:"Paperclip",className:"w-4 h-4"})}),e.jsx(F.Button,{onClick:h,disabled:l||!a.trim()&&u.length===0,className:ye("px-4 py-2",x(r)),children:e.jsx(F.Icon,{name:"Send",className:"w-4 h-4"})})]})]})})},Yr=({workspace:t,currentUser:s,chatId:r,context:n="consultant",onMessageSend:l,onChatSelect:a,showSidebar:o=!0,showSearch:u=!0,permissions:i=[],className:h})=>{const[f,x]=c.useState(null),[v,A]=c.useState([]),[T,E]=c.useState([]),[N,B]=c.useState(!1),{socket:$}=Lr();c.useEffect(()=>{const g=[{id:"1",type:"direct",participants:[s,{id:"2",name:"John Doe",email:"john@example.com",avatar:"/avatars/john.jpg"}],unreadCount:2,workspace:t.id,createdAt:new Date,lastMessage:{id:"1",content:"Hey, how are you?",sender:{id:"2",name:"John Doe",email:"john@example.com"},timestamp:new Date,chatId:"1",status:"read"}}];if(E(g),r){const I=g.find(V=>V.id===r);I&&x(I)}},[t.id,s,r]),c.useEffect(()=>($.on("message:new",S),$.on("message:update",b),$.on("typing:start",m),$.on("typing:stop",w),()=>{$.off("message:new"),$.off("message:update"),$.off("typing:start"),$.off("typing:stop")}),[$]);const S=g=>{A(I=>[...I,g])},b=g=>{A(I=>I.map(V=>V.id===g.id?g:V))},m=g=>{},w=g=>{},M=g=>{x(g),a==null||a(g),B(!0),setTimeout(()=>{const I=[{id:"1",content:"Hey, how are you?",sender:g.participants.find(V=>V.id!==s.id)||g.participants[0],timestamp:new Date(Date.now()-36e5),chatId:g.id,status:"read"},{id:"2",content:"I'm doing well, thanks! How about you?",sender:s,timestamp:new Date(Date.now()-3e6),chatId:g.id,status:"read"}];A(I),B(!1)},500)},C=(g,I)=>{if(!f)return;const V={id:Date.now().toString(),content:g,sender:s,timestamp:new Date,chatId:f.id,status:"sending",attachments:I==null?void 0:I.map(q=>({id:Date.now().toString(),name:q.name,type:q.type,size:q.size,url:URL.createObjectURL(q)}))};A(q=>[...q,V]),l==null||l(V),setTimeout(()=>{A(q=>q.map(k=>k.id===V.id?{...k,status:"sent"}:k))},1e3)};return e.jsxs("div",{className:ye("flex h-full bg-white rounded-lg shadow-lg overflow-hidden",h),children:[o&&e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsx(Vr,{chats:T,selectedChat:f,onChatSelect:M,context:n,currentUser:s})}),e.jsx("div",{className:"flex-1 flex flex-col",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gr,{chat:f,context:n,currentUser:s}),e.jsx(Kr,{messages:v,currentUser:s,context:n,loading:N}),e.jsx(Wr,{onSend:C,context:n,placeholder:"Type a message...",disabled:!1})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(F.EmptyState,{title:"Select a conversation",description:"Choose a conversation from the sidebar to start chatting"})})})]})},es={consultant:{primary:"#8B5CF6",secondary:"#A78BFA",accent:"#C4B5FD",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"},client:{primary:"#3B82F6",secondary:"#60A5FA",accent:"#93C5FD",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"},admin:{primary:"#EF4444",secondary:"#F87171",accent:"#FCA5A5",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"},expert:{primary:"#10B981",secondary:"#34D399",accent:"#6EE7B7",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"},tool_creator:{primary:"#F59E0B",secondary:"#FBBF24",accent:"#FCD34D",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"},founder:{primary:"#7C3AED",secondary:"#8B5CF6",accent:"#A78BFA",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"},neutral:{primary:"#6B7280",secondary:"#9CA3AF",accent:"#D1D5DB",background:"#FAFAFA",surface:"#FFFFFF",text:"#1F2937",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",warning:"#F59E0B",error:"#EF4444"}},ts=(t="neutral")=>es[t]||es.neutral,qr=t=>{const r=new Date().getTime()-t.getTime(),n=Math.floor(r/6e4),l=Math.floor(r/36e5),a=Math.floor(r/864e5);return n<1?"just now":n<60?`${n}m ago`:l<24?`${l}h ago`:a<7?`${a}d ago`:t.toLocaleDateString()},Hr=(t,s)=>{switch(t){case"urgent":return s.error;case"high":return s.warning;case"medium":return s.primary;case"low":default:return s.textSecondary}},ss=({onSubmit:t,onCancel:s,placeholder:r="Write a comment...",autoFocus:n=!1,className:l})=>{const[a,o]=c.useState(""),[u,i]=c.useState(!1),h=c.useCallback(async x=>{if(x.preventDefault(),!(!a.trim()||u)){i(!0);try{await t(a.trim()),o("")}finally{i(!1)}}},[a,t,u]),f=c.useCallback(x=>{x.key==="Enter"&&(x.metaKey||x.ctrlKey)&&h(x),x.key==="Escape"&&s&&s()},[h,s]);return e.jsxs("form",{onSubmit:h,className:ye("space-y-3",l),children:[e.jsx("textarea",{value:a,onChange:x=>o(x.target.value),onKeyDown:f,placeholder:r,autoFocus:n,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Press Cmd+Enter to submit"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s&&e.jsx(F.Button,{type:"button",variant:"ghost",size:"sm",onClick:s,disabled:u,children:"Cancel"}),e.jsx(F.Button,{type:"submit",size:"sm",disabled:!a.trim()||u,children:u?"Posting...":"Comment"})]})]})]})},rs=({comment:t,currentUser:s,context:r="neutral",depth:n=0,onReply:l,onResolve:a,onEdit:o,onDelete:u,onReact:i,allowReplies:h=!0,allowResolution:f=!0,allowEditing:x=!0,permissions:v=[]})=>{const[A,T]=c.useState(!1),[E,N]=c.useState(!1),[B,$]=c.useState(t.content),[S,b]=c.useState(!1),m=ts(r),w=t.author.id===(s==null?void 0:s.id),M=h&&v.includes("comment:reply"),C=f&&(v.includes("comment:resolve")||w),g=x&&(v.includes("comment:edit")||w),I=v.includes("comment:delete")||w,V=c.useCallback(y=>{l&&(l(t.id,y),T(!1))},[t.id,l]),q=c.useCallback(()=>{o&&B.trim()!==t.content&&o(t.id,B.trim()),N(!1)},[t.id,t.content,B,o]),k=c.useCallback(y=>{i&&i(t.id,y)},[t.id,i]),L=t.priority?Hr(t.priority,m):void 0;return e.jsxs("div",{className:ye("group relative",n>0&&"ml-8 border-l-2 border-gray-100 pl-4"),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[t.priority&&t.priority!=="low"&&e.jsx("div",{className:"absolute -left-1 top-3 w-2 h-2 rounded-full",style:{backgroundColor:L}}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(F.Avatar,{src:t.author.avatar,alt:t.author.name,size:"sm",className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:t.author.name}),e.jsx("span",{className:"text-xs text-gray-500",children:qr(t.timestamp)}),t.edited&&e.jsx("span",{className:"text-xs text-gray-400",children:"(edited)"}),t.resolved&&e.jsx(F.Badge,{variant:"success",size:"sm",children:"Resolved"}),t.priority&&t.priority!=="low"&&e.jsx(F.Badge,{variant:"secondary",size:"sm",className:"border",children:t.priority})]}),e.jsx("div",{className:"mb-2",children:E?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:B,onChange:y=>$(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Button,{size:"sm",onClick:q,children:"Save"}),e.jsx(F.Button,{size:"sm",variant:"ghost",onClick:()=>{N(!1),$(t.content)},children:"Cancel"})]})]}):e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:t.content})}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:t.tags.map(y=>e.jsx(F.Badge,{variant:"secondary",size:"sm",children:y},y))}),t.reactions&&t.reactions.length>0&&e.jsx("div",{className:"flex items-center space-x-1 mb-2",children:t.reactions.map(y=>e.jsxs("button",{onClick:()=>k(y.emoji),className:"flex items-center space-x-1 px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 text-xs",children:[e.jsx("span",{children:y.emoji}),e.jsx("span",{children:y.users.length})]},y.emoji))}),e.jsxs("div",{className:ye("flex items-center space-x-3 text-xs text-gray-500 transition-opacity",S?"opacity-100":"opacity-0"),children:[M&&!t.resolved&&e.jsx("button",{onClick:()=>T(!0),className:"hover:text-gray-700",children:"Reply"}),g&&!t.resolved&&e.jsx("button",{onClick:()=>N(!0),className:"hover:text-gray-700",children:"Edit"}),C&&!t.resolved&&e.jsx("button",{onClick:()=>a==null?void 0:a(t.id),className:"hover:text-gray-700",children:"Resolve"}),e.jsx("button",{onClick:()=>k("👍"),className:"hover:text-gray-700",children:"👍"}),e.jsx("button",{onClick:()=>k("❤️"),className:"hover:text-gray-700",children:"❤️"}),I&&e.jsx("button",{onClick:()=>u==null?void 0:u(t.id),className:"hover:text-red-600",children:"Delete"})]}),A&&e.jsx("div",{className:"mt-3",children:e.jsx(ss,{onSubmit:V,onCancel:()=>T(!1),placeholder:"Write a reply...",autoFocus:!0})}),t.replies&&t.replies.length>0&&e.jsx("div",{className:"mt-4 space-y-4",children:t.replies.map(y=>e.jsx(rs,{comment:y,currentUser:s,context:r,depth:n+1,onReply:l,onResolve:a,onEdit:o,onDelete:u,onReact:i,allowReplies:h,allowResolution:f,allowEditing:x,permissions:v},y.id))})]})]})]})},Ur=({comments:t,parentId:s,parentType:r,currentUser:n,context:l="neutral",onCommentAdd:a,onCommentReply:o,onCommentResolve:u,onCommentEdit:i,onCommentDelete:h,onCommentReact:f,allowReplies:x=!0,allowResolution:v=!0,allowEditing:A=!0,permissions:T=[],className:E})=>{const[N,B]=c.useState(!1),[$,S]=c.useState("all"),b=ts(l),m=c.useMemo(()=>t.map(V=>({...V,status:"active"})),[t]),w=c.useMemo(()=>m.filter(V=>{switch($){case"unresolved":return!V.resolved;case"resolved":return V.resolved;default:return!0}}),[m,$]),M=c.useMemo(()=>[...w].sort((V,q)=>new Date(V.timestamp).getTime()-new Date(q.timestamp).getTime()),[w]),C=c.useCallback(V=>{if(a){const q={content:V,author:n,workspaceId:n.workspace||"",resolved:!1,status:"active"};a(q),B(!1)}},[n,a]),g=c.useCallback((V,q)=>{if(o){const k={content:q,author:n,parentId:V,workspaceId:n.workspace||"",resolved:!1,status:"active"};o(V,k)}},[n,o]),I=T.includes("comment:create");return e.jsxs("div",{className:ye("space-y-4",E),style:{"--comment-primary":b.primary},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Comments (",m.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>S("all"),className:ye("px-3 py-1 text-sm rounded-md transition-colors",$==="all"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"),children:"All"}),e.jsx("button",{onClick:()=>S("unresolved"),className:ye("px-3 py-1 text-sm rounded-md transition-colors",$==="unresolved"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"),children:"Open"}),e.jsx("button",{onClick:()=>S("resolved"),className:ye("px-3 py-1 text-sm rounded-md transition-colors",$==="resolved"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"),children:"Resolved"})]})]}),I&&e.jsxs(F.Button,{size:"sm",onClick:()=>B(!0),disabled:N,children:[e.jsx(F.Icon,{name:"Plus",className:"w-4 h-4 mr-1"}),"Add Comment"]})]}),N&&e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsx(ss,{onSubmit:C,onCancel:()=>B(!1),autoFocus:!0})}),e.jsx("div",{className:"space-y-6",children:M.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:$==="all"?"No comments yet. Be the first to comment!":`No ${$} comments.`}):M.map(V=>e.jsx(rs,{comment:V,currentUser:n,context:l,onReply:g,onResolve:u,onEdit:i,onDelete:h,onReact:f,allowReplies:x,allowResolution:v,allowEditing:A,permissions:T},V.id))})]})},Jr={system:"System",chat:"Chat",comment:"Comments",task:"Tasks",billing:"Billing",general:"General"},Xr={info:{icon:"Info",color:"blue"},success:{icon:"CheckCircle",color:"green"},warning:{icon:"AlertTriangle",color:"yellow"},error:{icon:"AlertCircle",color:"red"},mention:{icon:"AtSign",color:"purple"},update:{icon:"RefreshCw",color:"blue"}},Qr=t=>{const r=new Date().getTime()-t.getTime(),n=Math.floor(r/6e4),l=Math.floor(r/36e5),a=Math.floor(r/864e5);return n<1?"Just now":n<60?`${n}m ago`:l<24?`${l}h ago`:a<7?`${a}d ago`:t.toLocaleDateString()},Zr=t=>{const s=new Date,r=new Date(s.getFullYear(),s.getMonth(),s.getDate()),n=new Date(r.getTime()-864e5),l=new Date(t.getFullYear(),t.getMonth(),t.getDate());return l.getTime()===r.getTime()?"Today":l.getTime()===n.getTime()?"Yesterday":t.toLocaleDateString()},Rr=({children:t,context:s})=>e.jsx("div",{className:`
    notification-center
    bg-white dark:bg-gray-900
    border border-gray-200 dark:border-gray-700
    rounded-lg shadow-lg
    w-96 max-h-96 overflow-hidden
    ${s==="consultant"?"border-blue-200 dark:border-blue-800":""}
    ${s==="client"?"border-green-200 dark:border-green-800":""}
    ${s==="admin"?"border-purple-200 dark:border-purple-800":""}
    ${s==="expert"?"border-orange-200 dark:border-orange-800":""}
    ${s==="tool_creator"?"border-pink-200 dark:border-pink-800":""}
    ${s==="founder"?"border-yellow-200 dark:border-yellow-800":""}
  `,children:t}),ea=({children:t})=>e.jsx("div",{className:"notification-header p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:t}),ta=({children:t})=>e.jsx("div",{className:"header-actions flex items-center gap-2",children:t}),sa=({children:t})=>e.jsx("div",{className:"notification-filters p-2 border-b border-gray-200 dark:border-gray-700 flex flex-wrap gap-1",children:t}),Ct=({children:t,active:s,onClick:r})=>e.jsx("button",{onClick:r,className:`
      filter-button px-3 py-1 rounded-full text-sm font-medium transition-colors
      ${s?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}
    `,children:t}),ra=({children:t})=>e.jsx("div",{className:"notification-list max-h-80 overflow-y-auto",children:t}),aa=({children:t})=>e.jsx("div",{className:"notification-group",children:t}),na=({children:t})=>e.jsx("div",{className:"date-header px-4 py-2 bg-gray-50 dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 sticky top-0",children:t}),la=({notification:t,onClick:s,onMarkAsRead:r,context:n})=>{const l=Xr[t.type];return e.jsx("div",{className:`
        notification-item p-4 border-b border-gray-100 dark:border-gray-800 cursor-pointer
        hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors
        ${t.read?"":"bg-blue-50 dark:bg-blue-950"}
      `,onClick:s,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
          notification-icon flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center
          ${l.color==="blue"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":""}
          ${l.color==="green"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":""}
          ${l.color==="yellow"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":""}
          ${l.color==="red"?"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-400":""}
          ${l.color==="purple"?"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400":""}
        `,children:e.jsx(F.Icon,{name:l.icon,size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.message})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Qr(t.timestamp)}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),t.sender&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(F.Avatar,{src:t.sender.avatar,alt:t.sender.name,size:"xs",fallback:t.sender.name.charAt(0)}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.sender.name})]}),t.actions&&t.actions.length>0&&e.jsx("div",{className:"flex gap-2 mt-3",children:t.actions.map(a=>e.jsx(F.Button,{variant:a.type==="primary"?"primary":"secondary",size:"sm",onClick:o=>{o.stopPropagation()},children:a.label},a.id))})]})]})})},oa=({message:t,context:s})=>e.jsxs("div",{className:"empty-state p-8 text-center",children:[e.jsx(F.Icon,{name:"Bell",size:"lg",className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t})]}),ia=({notifications:t,currentUser:s,context:r="neutral",onNotificationClick:n,onMarkAsRead:l,onMarkAllAsRead:a,onClearAll:o,showFilters:u=!0,showSettings:i=!0,permissions:h=[]})=>{const[f,x]=c.useState("all"),[v,A]=c.useState(!1),T=w=>h.includes(w),E=c.useMemo(()=>{let w=t;return f==="unread"?w=w.filter(M=>!M.read):f!=="all"&&(w=w.filter(M=>M.category===f)),w.sort((M,C)=>C.timestamp.getTime()-M.timestamp.getTime())},[t,f]),N=c.useMemo(()=>E.reduce((w,M)=>{const C=Zr(M.timestamp);return w[C]||(w[C]=[]),w[C].push(M),w},{}),[E]),B=c.useCallback(w=>{!w.read&&l&&l(w.id),n&&n(w)},[l,n]),$=c.useCallback(w=>{l&&l(w)},[l]),S=c.useCallback(()=>{a&&a()},[a]),b=c.useCallback(()=>{o&&o()},[o]),m=t.filter(w=>!w.read).length;return e.jsxs(Rr,{context:r,children:[e.jsxs(ea,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"}),m>0&&e.jsx(F.Badge,{variant:"primary",size:"sm",children:m})]}),e.jsxs(ta,{children:[m>0&&e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:S,children:"Mark all as read"}),t.length>0&&T("notification:clear")&&e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:b,children:"Clear all"}),i&&e.jsx(F.Button,{variant:"ghost",size:"sm",onClick:()=>A(!0),children:e.jsx(F.Icon,{name:"Settings",size:"sm"})})]})]}),u&&e.jsxs(sa,{children:[e.jsx(Ct,{active:f==="all",onClick:()=>x("all"),children:"All"}),e.jsxs(Ct,{active:f==="unread",onClick:()=>x("unread"),children:["Unread ",m>0&&`(${m})`]}),Object.entries(Jr).map(([w,M])=>{const C=t.filter(g=>g.category===w).length;return C>0?e.jsxs(Ct,{active:f===w,onClick:()=>x(w),children:[M," (",C,")"]},w):null})]}),e.jsx(ra,{children:Object.keys(N).length===0?e.jsx(oa,{message:f==="unread"?"No unread notifications":"No notifications",context:r}):Object.entries(N).map(([w,M])=>e.jsxs(aa,{children:[e.jsx(na,{children:w}),M.map(C=>e.jsx(la,{notification:C,onClick:()=>B(C),onMarkAsRead:()=>$(C.id),context:r},C.id))]},w))})]})};ie.ActivityFeed=Vs,ie.BreadcrumbNav=Es,ie.CardGrid=Gs,ie.ChatInterface=Yr,ie.ClientNav=Ps,ie.CommentThread=Ur,ie.ConsultantNav=zs,ie.DataGrid=Ks,ie.DataTable=Ws,ie.FormBuilder=Zs,ie.FormTemplate=tr,ie.FormWizard=nr,ie.MobileNav=Ds,ie.NotificationCenter=ia,ie.SideNavigation=Ms,ie.TabNavigation=As,ie.Timeline=Ys,ie.TopNavigation=Ss,ie.WorkspaceNav=$s,Object.defineProperty(ie,Symbol.toStringTag,{value:"Module"})});
